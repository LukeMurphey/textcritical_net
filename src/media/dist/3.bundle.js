(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{280:function(e,t,n){"use strict";function r(){return"/"}function o(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t="",n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=r.filter((function(e){return e}));return 0<r.length&&e?(t=a.join("/"),"/work/".concat(e,"/").concat(t)):"/work/".concat(e)}function a(){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r="/search?q=".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return n&&(r+="&page=".concat(n)),e&&(r+="&ignore_diacritics=1"),t&&(r+="&include_related=1"),r}function i(){return"https://www.google.com/search?q=".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")}function l(){return"http://www.perseus.tufts.edu/hopper/morph?l=".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"","&la=greek")}function c(){return"https://logeion.uchicago.edu/".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")}n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}))},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return d}));var r={};function o(e){var t=0<arguments.length&&void 0!==e?e:window.location.hostname;return t in r?r[t]:""}function a(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t="",n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return 0<r.length&&e?(t=r.join("/"),"".concat(o(),"/api/work/").concat(e,"/").concat(t)):"".concat(o(),"/api/work/").concat(e)}function i(e){return"".concat(o(),"/api/work_info/").concat(e)}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;return"".concat(o(),"/api/work_image/").concat(e,"?width=").concat(t)}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"epub";return"".concat(o(),"/api/download/work/").concat(e,"?format=").concat(t)}function u(e,t){return"".concat(o(),"/api/resolve_reference/?work=").concat(e,"&ref=").concat(t)}function s(e){return"".concat(o(),"/api/word_parse/").concat(e)}function f(){return"".concat(o(),"/api/works")}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=0;2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&(n=1);var r=0;return 3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&(r=1),"".concat(o(),"/api/search/").concat(encodeURIComponent(e),"?page=").concat(t,"&related_forms=").concat(n,"&ignore_diacritics=").concat(r)}},284:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n.n(a),l=n(272),c=n(278);function u(e){var t=e.title,n=e.description,r=e.message,a=e.inverted;return o.a.createElement(l.a,{color:"red",inverted:a},o.a.createElement(c.a,{as:"h3"},t),n&&n,r&&n&&o.a.createElement("div",{style:{marginBottom:12}}),r)}u.propTypes={title:i.a.string.isRequired,description:i.a.string,message:i.a.string.isRequired,inverted:i.a.bool},u.defaultProps={description:null,inverted:!1},t.a=u},444:function(e,t,n){var r=n(132),o=n(445);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=a},445:function(e,t,n){(t=n(133)(!1)).push([e.i,".ui.inverted.segment.popupDialog{background-color:#2B2B2E;border:1px solid #444;-webkit-box-shadow:0 15px 20px rgba(0,0,0,0.5);box-shadow:0 15px 20px rgba(0,0,0,0.5)}.popupDialog{z-index:100}.ui.inverted.segment.popupDialogFooter{border-top:1px solid #202023;background-color:#202023}.ui.segment.popupDialogFooter{border-top:1px solid #DDD;background-color:#F6F6F6}\n",""]),e.exports=t},446:function(e,t,n){var r=n(132),o=n(447);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=a},447:function(e,t,n){(t=n(133)(!1)).push([e.i,'.view_read_work .speaker{font-weight:bold;display:block;margin-top:12px}.view_read_work .milestone{color:#999999}.view_read_work [data-rend=italics]{font-style:italic}.view_read_work .milestone[data-n].milestone[data-unit]:after{font-size:smaller;margin:3px;content:"[" attr(data-unit) " " attr(data-n) "]"}.view_read_work .milestone[data-unit=para]{display:block;padding-top:12px}.view_read_work .l{display:block;margin-left:24px}.view_read_work .gap{content:"..."}.view_read_work .quote,.view_read_work .q{font-style:italic}.view_read_work .bibl{margin-left:3px;margin-right:3px;font-weight:bold}.view_read_work .bibl::before{content:"["}.view_read_work .bibl::after{content:"]"}.view_read_work .docauthor{display:block;padding-bottom:16px}.view_read_work .label:not(.block) .label{margin-left:8px;margin-right:4px}.view_read_work .note-tag{margin-left:4px;margin-right:2px;cursor:hand;cursor:pointer}.view_read_work .read-more{margin-top:16px;display:block}.view_read_work .lb{display:block}.view_read_work .div3{padding-top:16px;display:block}.view_read_work .quote>.title{font-weight:bold;display:block}.view_read_work .castlist:before{content:"Cast list: "}.view_read_work .castlist>.castitem:after{content:", "}.view_read_work .castlist>.castitem:last-child:after{content:""}.view_read_work .argument{font-style:italic}.view_read_work .p{margin-bottom:16px;display:block}.view_read_work .lemma{text-decoration:underline;font-weight:bold}.view_read_work .orth{font-weight:bold;font-size:14pt;display:block}.view_read_work .etym{display:block;margin-top:12px;font-weight:bold}.view_read_work .sense{display:block;margin-left:32px}.view_read_work .hide{display:none}.view_read_work{font-family:"Helvetica Neue", Helvetica, Arial, sans-serif}.view_read_work .icon-info-sign{font-family:"Icons";font-style:normal}.view_read_work .icon-info-sign:before{content:"\\f129"}.verse.number{font-weight:bold}.inverted .verse.number{color:white}.verse-container{display:inline;line-height:25px}.block{display:block;margin-top:12px}.verse-link{padding:0 4px}.verse-link:visited{color:#EEE}.verse-link:active{color:#EEE}.verse-link:link{color:#EEE}.verse-link:hover{color:#08C}.verse-link.highlighted{background-color:red;border-radius:2px}.verse-link.highlighted .verse.number{color:white}.inverted{background-color:#2B2B2E;color:#F9F9FA}.no_definition_entries{font-style:italic}.word.highlighted,.word.searched{border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;color:white}.word.highlighted{background-color:#49AFCD}.word.searched{background-color:#468847}.division-2{padding-left:24px}.division-3{padding-left:48px}.division-4{padding-left:72px}.division-5{padding-left:96px}.verse .word{cursor:pointer;cursor:hand}.verse .word:hover{text-decoration:underline}@media print{.view_read_work .note-tag{display:none}}\n',""]),e.exports=t},462:function(e,t,n){var r=n(132),o=n(463);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=a},463:function(e,t,n){(t=n(133)(!1)).push([e.i,'.view_lexicon .speaker {\n  font-weight: bold;\n  display: block;\n  margin-top: 12px;\n}\n.view_lexicon .milestone {\n  color: #999999;\n}\n.view_lexicon [data-rend="italics"] {\n  font-style: italic;\n}\n.view_lexicon .milestone[data-n].milestone[data-unit]:after {\n  font-size: smaller;\n  margin: 3px;\n  content: "[" attr(data-unit) " " attr(data-n) "]";\n}\n.view_lexicon .milestone[data-unit="para"] {\n  display: block;\n  padding-top: 12px;\n}\n.view_lexicon .l {\n  display: block;\n  margin-left: 24px;\n}\n.view_lexicon .gap {\n  content: "...";\n}\n.view_lexicon .quote,\n.view_lexicon .q {\n  font-style: italic;\n}\n.view_lexicon .bibl {\n  margin-left: 3px;\n  margin-right: 3px;\n  font-weight: bold;\n}\n.view_lexicon .bibl::before {\n  content: "[";\n}\n.view_lexicon .bibl::after {\n  content: "]";\n}\n.view_lexicon .docauthor {\n  display: block;\n  padding-bottom: 16px;\n}\n.view_lexicon .label:not(.block) .label {\n  margin-left: 8px;\n  margin-right: 4px;\n}\n.view_lexicon .note-tag {\n  margin-left: 4px;\n  margin-right: 2px;\n  cursor: hand;\n  cursor: pointer;\n}\n.view_lexicon .read-more {\n  margin-top: 16px;\n  display: block;\n}\n\n.view_lexicon .lb {\n  display: block;\n}\n\n.view_lexicon .div3 {\n  padding-top: 16px;\n  display: block;\n}\n\n.view_lexicon .quote > .title {\n  font-weight: bold;\n  display: block;\n}\n\n.view_lexicon .p {\n  margin-bottom: 16px;\n  display: block;\n}\n\n.view_lexicon .lemma {\n  text-decoration: underline;\n  font-weight: bold;\n}\n\n.view_lexicon .orth {\n  font-weight: bold;\n  display: block;\n}\n\n.view_lexicon .etym {\n  display: block;\n  margin-top: 12px;\n  font-weight: bold;\n}\n\n/**\n * Style the sense entries so that they are nested accordingly\n */\n.view_lexicon .sense {\n  display: block;\n  margin-left: 15px;\n  margin-top: 8px;\n}\n\n/**\n * Set the margins\n */\n.view_lexicon .sense[data-level="2"] {\n  margin-left: 30px;\n}\n\n.view_lexicon .sense[data-level="3"] {\n  margin-left: 45px;\n}\n\n.view_lexicon .sense[data-level="4"] {\n  margin-left: 60px;\n}\n\n.view_lexicon .sense[data-level="5"] {\n  margin-left: 75px;\n}\n\n.view_lexicon .sense[data-level="6"] {\n  margin-left: 90px;\n}\n\n/**\n * Show the N indicator ("1.", "2.", etc.)\n */\n.view_lexicon .sense[data-level]:before {\n  content: "" attr(data-n) ". ";\n}\n\n.view_lexicon .sense[data-level="0"]:before {\n  content: "";\n}\n\n/* -----------------------------------------\n     Read work\n     ----------------------------------------- */\n.verse.number {\n  font-weight: bold;\n  color: black;\n  /*\n  border: white solid 1px;\n  padding: 1px 4px 1px 4px;\n  background-color: white;\n  */\n}\n\n.verse-container {\n  display: inline;\n  line-height: 25px;\n}\n\n.block {\n  display: block;\n  margin-top: 12px;\n}\n\n.no_definition_entries {\n  font-style: italic;\n}\n\n.verse .word {\n  cursor: pointer;\n  cursor: hand;\n}\n.verse .word:hover {\n  text-decoration: underline;\n}\n\n.view_lexicon .tr {\n  font-style: italic;\n  font-weight: bold;\n}\n\n@media print {\n  .view_lexicon .note-tag {\n    display: none;\n  }\n}',""]),e.exports=t},465:function(e,t,n){var r=n(132),o=n(466);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=a},466:function(e,t,n){(t=n(133)(!1)).push([e.i,"@media print{.ui.top.menu{display:none}.underMenu{margin-top:0}}@media screen{.underMenu{margin-top:60px}}@media only screen{.ui.inverted.action.input.referenceJumpInput>input{width:130px}}@media only screen and (min-width: 767px){.ui.inverted.action.input.referenceJumpInput>input{width:180px}}.menu.control.inverted{background-color:#202023;border-bottom:1px solid #202023}.pushable.inverted>.pusher,.pushable.inverted>.pusher,.underMenu.inverted{background-color:#2B2B2E}.otherVersions>.menu>.item>.text{margin-right:64px}.bookProgress.ui.progress>.bar,.bookProgress.ui.progress{border-radius:0}\n",""]),e.exports=t},516:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(269),i=n(498),l=n(275),c=n(6),u=n.n(c),s=n(517),f=n(278),d=n(520),p=n(277);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,r.Component);var e,t,n,a=function(e){return function(){var t,n,r,o=y(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=y(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return e=i,n=[{key:"getInfoRow",value:function(e,t){return o.a.createElement(d.a.Row,null,o.a.createElement(d.a.Cell,null,o.a.createElement("strong",null,e)),o.a.createElement(d.a.Cell,null,t))}},{key:"getInfoLinkRow",value:function(e,t,n,r){var a=3<arguments.length&&void 0!==r?r:"";return o.a.createElement(d.a.Row,null,o.a.createElement(d.a.Cell,null,o.a.createElement("strong",null,e)),o.a.createElement(d.a.Cell,null,a,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},n)))}}],(t=[{key:"render",value:function(){var e=this.props.onClose;return o.a.createElement(s.a,{defaultOpen:!0,onClose:e,closeIcon:!0},o.a.createElement(f.a,{icon:"info",content:"About TextCritical.net"}),o.a.createElement(s.a.Content,null,o.a.createElement("p",null,"TextCritical.net is a website that provides ancient Greek texts and useful analysis tools."),o.a.createElement(d.a,{basic:"very",celled:!0,collapsing:!0},o.a.createElement(d.a.Body,null,i.getInfoRow("Version","4.0"),i.getInfoLinkRow("Sources of the works","https://lukemurphey.net/projects/ancient-text-reader/wiki/Content_Sources","LukeMurphey.net","Available at "),i.getInfoLinkRow("Source Code","https://github.com/LukeMurphey/textcritical_net","Github.com","Available at "),i.getInfoLinkRow("Components used","https://lukemurphey.net/projects/ancient-text-reader/wiki/Dependencies","LukeMurphey.net","Available at ")))),o.a.createElement(s.a.Actions,null,o.a.createElement(p.a,{onClick:e},"Close")))}}])&&m(e.prototype,t),n&&m(e,n),i}();g.propTypes={onClose:u.a.func.isRequired};var b=g,w=n(525),k=n(35),E=n(519),_=n(508),x=n(529),S=n(521),C=n(527),O=n(129),R=n(272),j=n(499),P=n(524),T=n(515),A=n(352),I=n(282);function W(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D="lastReadHistory";function N(e){var t=((0<arguments.length&&void 0!==e?e:null)||localStorage).getItem(D);if(t)try{return JSON.parse(t).filter((function(e){return e.workTitleSlug}))}catch(e){return console.warn("The list of last read works could not be loaded"),null}return null}function V(e,t,n,r){var o=(3<arguments.length&&void 0!==r?r:null)||localStorage;if(function(e){var t;try{t=window.localStorage;var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),1}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage")){var a=N(o);null===a&&(a=[]);var i=a.findIndex((function(t){return t.workTitleSlug===e})),l=0<=i?a[i]:{};0<=i&&(a=[].concat(W(a.slice(0,i)),W(a.slice(i+1)))),l.workTitleSlug=e,l.divisions=t,l.divisionReference=n,a.splice(0,0,l),5<a.length&&(a=a.slice(0,5)),o.setItem(D,JSON.stringify(a))}}var M=n(280),F=n(432),B=n.n(F),q=n(279);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){return[e.clientX<window.innerWidth/2,e.clientY<window.innerHeight/2]}function G(e){function t(){return window.innerWidth<1024}function n(){return o.a.createElement(R.a,{className:"popupDialog",inverted:f,style:t()?c?m:h:p},o.a.createElement("div",{style:{padding:15}},o.a.createElement(k.a,{style:d,onClick:a},"âœ•"),r),s&&o.a.createElement(R.a,{className:"popupDialogFooter",inverted:f,basic:!0,style:v},s))}var r=e.children,a=e.onClose,i=e.x,l=e.y,c=e.positionBelow,u=e.positionRight,s=e.footer,f=e.inverted,d={float:"right",cursor:"pointer",marginRight:0},p={position:"absolute",width:500,maxHeight:300,overflowY:"auto",padding:0,zIndex:103},h=U({},p,{},{top:45,left:5,width:"calc(100% - 10px)",position:"fixed"}),m=U({},p,{},{bottom:5,left:5,width:"calc(100% - 10px)",position:"fixed"}),v={position:"sticky",bottom:0,width:"100%"},y=p.height?p.height:200;return p.top=c?l:l-y-20,p.left=u?i:i-p.width-10,t()?o.a.createElement(q.a,{open:!0},n()):n()}n(444),G.propTypes={onClose:u.a.func.isRequired,x:u.a.number.isRequired,y:u.a.number.isRequired,positionBelow:u.a.bool,positionRight:u.a.bool,children:u.a.element.isRequired,footer:u.a.element,inverted:u.a.bool},G.defaultProps={positionBelow:!0,positionRight:!0,footer:null,inverted:!1};var J=G;function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(446);var re=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(a,r.Component);var e,t,n=function(e){return function(){var t,n,r,o=ne(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=ne(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==X(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).clickListener=null,t.highlightOverridden=!1,t}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this;this.clickListener=function(t){return e.handleClick(t)},this.addHandler(this.clickListener)}},{key:"componentWillUnmount",value:function(){this.removeHandler(this.clickListener)}},{key:"getText",value:function(e){var t=this;try{var n=[];3===e.nodeType&&e.textContent&&0<e.textContent.length&&n.push(e.textContent);var r=Array.from(e.childNodes).reduce((function(e,n){return e.concat.apply(e,K(t.getText(n)))}),[]);if(n.push.apply(n,K(r)),n)return n}catch(n){return[e.textContent]}return[e.textContent]}},{key:"getChapterContent",value:function(e){var t=this.props,n=t.content,r=t.highlightedVerse,a={replace:function(e){var t=e.attribs,n=e.children;if(t)return t&&t["data-verse"]===r?o.a.createElement("a",{className:"verse-link highlighted",href:t.href,"data-verse":t["data-verse"],"data-verse-descriptor":t["data-verse-descriptor"],id:t.id},Object(F.domToReact)(n,a)):void 0}},i=B()(n,a);return o.a.createElement("div",{className:e,ref:this.wrapper},i)}},{key:"addHandler",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"click";this.wrapper.current&&this.wrapper.current.addEventListener(n,(function(t){return e(t)}))}},{key:"removeHandler",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"click";this.wrapper.current&&this.wrapper.current.removeEventListener(n,(function(t){return e(t)}))}},{key:"handleClickWord",value:function(e){var t=e.target.textContent,n=this.props.onWordClick,r=$(Y(e),2),o=r[0],a=r[1];n(t,e.layerX,e.layerY,o,a)}},{key:"unhighlistVerses",value:function(){this.wrapper&&this.wrapper.current&&Array.from(this.wrapper.current.getElementsByClassName("highlighted")).map((function(e){return e.classList.remove("highlighted")}))}},{key:"highlightVerse",value:function(e){var t=this;if(this.wrapper&&this.wrapper.current){var n=Array.from(this.wrapper.current.getElementsByClassName("verse-link")).find((function(t){return!(!t.attributes["data-verse"]||t.attributes["data-verse"].nodeValue!==e)}));n&&n.parentElement.classList.toggle("highlighted")}else setTimeout((function(){return t.highlightVerse(e)}),100)}},{key:"handleClickVerse",value:function(e){e.preventDefault();var t,n=e.target.parentElement,r=Array.from(n.attributes).find((function(e){return"data-verse-descriptor"===e.name})),o=r?r.nodeValue:null,a=n.id;t=n.attributes.href?n.attributes.href.nodeValue:null;var i=Array.from(n.attributes).find((function(e){return"data-verse"===e.name})),l=i?i.nodeValue:null;o&&(this.highlightOverridden=!0,(0,this.props.onVerseClick)(o,l,a,t,e.x,e.y))}},{key:"handleClickNote",value:function(e){var t=e.target.id,n=document.getElementById("content_for_".concat(t)),r=["Note content could not be found"];n&&(r=[n.textContent]);var o=$(Y(e),2),a=o[0],i=o[1];(0,this.props.onNoteClick)(r,t,e.layerX,e.layerY,a,i)}},{key:"handleClickEmpty",value:function(){(0,this.props.onClickAway)()}},{key:"handleClick",value:function(e){e.target.className.includes("word")?this.handleClickWord(e):e.target.className.includes("verse")?(this.handleClickVerse(e),this.handleClickEmpty()):e.target.className.includes("note-tag")?this.handleClickNote(e):this.handleClickEmpty()}},{key:"render",value:function(){var e="view_read_work";return this.props.inverted&&(e="view_read_work inverted"),this.wrapper=Object(r.createRef)(),o.a.createElement(o.a.Fragment,null,this.getChapterContent(e))}}])&&ee(e.prototype,t),a}();re.propTypes={content:u.a.string.isRequired,highlightedVerse:u.a.string,onVerseClick:u.a.func,onWordClick:u.a.func,onClickAway:u.a.func,onNoteClick:u.a.func,inverted:u.a.bool},re.defaultProps={highlightedVerse:null,onVerseClick:function(){},onWordClick:function(){},onClickAway:function(){},onNoteClick:function(){},inverted:!1};var oe=re,ae=n(284);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r.Component);var e=function(e){return function(){var t,n,r,o=se(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=se(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==ie(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(t);function t(n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this,n)).state={data:null,error:null},r}return ce(t,null,[{key:"getInfoRow",value:function(e,t){return o.a.createElement(d.a.Row,null,o.a.createElement(d.a.Cell,null,o.a.createElement("strong",null,e)),o.a.createElement(d.a.Cell,null,t))}}]),ce(t,[{key:"componentDidMount",value:function(){var e=this.props.work;this.loadInfo(e)}},{key:"loadInfo",value:function(e){var t=this;fetch(Object(I.h)(e)).then((function(e){return e.json()})).then((function(e){t.setState({data:e})})).catch((function(e){t.setState({error:e.toString()})}))}},{key:"render",value:function(){var e=this.props,n=e.onClose,r=e.work,a=this.state,i=a.data,l=a.error;return o.a.createElement(s.a,{size:"small",defaultOpen:!0,onClose:n,closeIcon:!0},!i&&o.a.createElement(f.a,{icon:"info",content:"About this Book"}),i&&o.a.createElement(f.a,{icon:"info",content:"About ".concat(i.title)}),o.a.createElement(s.a.Content,{scrolling:!0},l&&o.a.createElement(ae.a,{title:"Unable to load work information",description:"Unable to get information about the work from the server",message:l}),!l&&i&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"inline-block",marginRight:16}},o.a.createElement(O.a,{src:Object(I.g)(r)})),o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement(d.a,{basic:"very",celled:!0,collapsing:!0},o.a.createElement(d.a.Body,null,t.getInfoRow("Title",i.title),t.getInfoRow("Language",i.language),t.getInfoRow("Source",i.source)))),o.a.createElement("div",{style:{marginTop:16}},i.source_description&&i.source_description),i.wiki_info&&o.a.createElement("div",{style:{marginTop:16}},i.wiki_info.summary)),!l&&!i&&o.a.createElement(w.a,null,o.a.createElement(w.a.Header,{image:!0},o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null)),o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null)))),o.a.createElement(s.a.Actions,null,i&&i.wiki_info&&o.a.createElement("a",{target:"_blank",style:{marginTop:10,float:"left"},rel:"noopener noreferrer",href:i.wiki_info.url},"View on wikipedia"),o.a.createElement(p.a,{onClick:n},"Close")))}}]),t}();fe.propTypes={onClose:u.a.func.isRequired,work:u.a.string.isRequired};var de=fe,pe=n(518),he=n(512);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be="epub",we=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(a,r.Component);var e,t,n=function(e){return function(){var t,n,r,o=ge(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=ge(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==me(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={format:be},t}return e=a,(t=[{key:"handleChange",value:function(e,t){this.setState({format:t.value})}},{key:"download",value:function(){var e=this.state.format,t=this.props.work;document.location=Object(I.f)(t,e)}},{key:"render",value:function(){var e=this,t=this.props.onClose,n=this.state.format;return o.a.createElement(s.a,{size:"tiny",defaultOpen:!0,onClose:t,closeIcon:!0},o.a.createElement(f.a,{icon:"info",content:"Download Book"}),o.a.createElement(s.a.Content,null,o.a.createElement("div",{stryle:{marginBottom:12}},"Select which format you would like to download:"),o.a.createElement(pe.a,null,o.a.createElement(pe.a.Field,null,o.a.createElement(he.a,{label:"ePUB Format (Recommended)",name:"radioGroup",value:be,checked:n===be,onChange:function(t,n){return e.handleChange(t,n)}})),o.a.createElement(pe.a.Field,null,o.a.createElement(he.a,{label:"MOBI Format (Amazon Kindle)",name:"radioGroup",value:"mobi",checked:"mobi"===n,onChange:function(t,n){return e.handleChange(t,n)}})))),o.a.createElement(s.a.Actions,null,o.a.createElement(p.a,{onClick:t},"Close"),o.a.createElement(p.a,{primary:!0,onClick:function(){return e.download()}},"Download")))}}])&&ve(e.prototype,t),a}();function ke(e){var t=e.lexiconEntries,n="";return e.inverted&&(n="inverted"),o.a.createElement(o.a.Fragment,null,0===t.length&&o.a.createElement(P.a,{warning:!0,className:n},o.a.createElement(k.a,{name:"warning"}),"No definition available from Liddel and Scott."),t&&t.map((function(e){return o.a.createElement("div",{key:e.lemma_lexical_form,className:"view_lexicon",dangerouslySetInnerHTML:{__html:e.definition}})})))}we.propTypes={onClose:u.a.func.isRequired,work:u.a.string.isRequired};var Ee=we,_e=n(523),xe=n(130);n(462),ke.propTypes={lexiconEntries:u.a.arrayOf(u.a.shape),inverted:u.a.bool},ke.defaultProps={lexiconEntries:null,inverted:!1};var Se=ke;function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(i,r.Component);var e,t,n,a=function(e){return function(){var t,n,r,o=je(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=je(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==Ce(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={loading:!1,wordInfo:null,error:null,activeIndex:null},t}return e=i,n=[{key:"getSearchLinks",value:function(e,t){return t?o.a.createElement(o.a.Fragment,null,"Search for"," ",e," ","in"," ",o.a.createElement(xe.a,{to:Object(M.e)("work:".concat(t," ").concat(e))},"this work")," ","or"," ",o.a.createElement(xe.a,{to:Object(M.e)(e)},"all works")):o.a.createElement(o.a.Fragment,null,"Search for"," ",o.a.createElement(xe.a,{to:Object(M.e)(e)},e))}}],(t=[{key:"componentDidMount",value:function(){var e=this.props.word;this.getWordInfo(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.word;t!==e.word&&this.getWordInfo(t)}},{key:"getWordInfo",value:function(e){var t=this;this.setState({loading:!0}),fetch(Object(I.d)(e)).then((function(e){return e.json()})).then((function(e){t.setState({wordInfo:e,loading:!1,error:null,activeIndex:null})})).catch((function(e){t.setState({error:e.toString(),loading:!1})}))}},{key:"handleClick",value:function(e,t){var n=t.index,r=this.state.activeIndex===n?-1:n;this.setState({activeIndex:r})}},{key:"render",value:function(){var e=this,t=this.props,n=t.word,r=t.inverted,a=t.work,l=this.state,c=l.wordInfo,u=l.loading,s=l.error,f=l.activeIndex,d=0;return!u&&c?d=2:!u&&s&&(d=1),o.a.createElement(o.a.Fragment,null,2===d&&o.a.createElement("div",null,"Found"," ",c.length," ",1!==c.length&&o.a.createElement(o.a.Fragment,null,"parses for"),1===c.length&&o.a.createElement(o.a.Fragment,null,"parse for")," ",n,".",c&&0<c.length&&c[0].ignoring_diacritics&&o.a.createElement(o.a.Fragment,null," ","An exact match could not be found, so similar words with different diacritical marks are being returned."),o.a.createElement(_e.a,{inverted:r,style:{marginTop:18},fluid:!0},c.map((function(t,n){return o.a.createElement(o.a.Fragment,{key:"".concat(t.form,"::").concat(t.description)},o.a.createElement(_e.a.Title,{active:f===n,index:n,onClick:function(t,n){return e.handleClick(t,n)}},o.a.createElement(k.a,{name:"dropdown"}),t.lemma," ","(",t.description,"):"," ",t.meaning),o.a.createElement(_e.a.Content,{active:f===n},o.a.createElement(Se,{lexiconEntries:t.lexicon_entries,inverted:r})))}))),o.a.createElement("div",{style:{marginTop:12}},i.getSearchLinks(n,a))),1===d&&o.a.createElement("div",null,o.a.createElement(ae.a,{inverted:r,title:"Unable to get word information",description:"Information for the given word could not be obtained.",message:s})),0===d&&o.a.createElement(w.a,{inverted:r,style:{marginTop:32}},o.a.createElement(w.a.Header,null,o.a.createElement(w.a.Line,null)),o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null))))}}])&&Oe(e.prototype,t),n&&Oe(e,n),i}();Pe.propTypes={word:u.a.string.isRequired,work:u.a.string,inverted:u.a.bool},Pe.defaultProps={inverted:!1,work:null};var Te=Pe;function Ae(e){var t=e.word;return o.a.createElement("div",null,"Look up at"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:Object(M.c)(t)},"Perseus"),","," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:Object(M.b)(t)},"Logeion"),", or"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:Object(M.a)(t)},"Google"))}function Ie(e){var t=e.word,n=e.onClose,r=e.x,a=e.y,i=e.positionBelow,l=e.positionRight,c=e.inverted,u=e.work;return o.a.createElement(J,{onClose:n,inverted:c,x:r,y:a,positionBelow:i,positionRight:l,footer:o.a.createElement(We,{word:t})},o.a.createElement(Te,{work:u,word:t,inverted:c}))}Ae.propTypes={word:u.a.string.isRequired};var We=Ae;function Le(e){var t=e.notes,n=e.onClose,r=e.x,a=e.y,i=e.positionBelow,l=e.positionRight,c=e.inverted;return o.a.createElement(J,{onClose:n,inverted:c,x:r,y:a,positionBelow:i,positionRight:l},o.a.createElement("div",null,t.map((function(e,t){return o.a.createElement("div",{key:t},e)}))))}Ie.propTypes={word:u.a.string.isRequired,onClose:u.a.func.isRequired,x:u.a.number.isRequired,y:u.a.number.isRequired,positionBelow:u.a.bool,positionRight:u.a.bool,inverted:u.a.bool,work:u.a.string},Ie.defaultProps={positionBelow:!0,positionRight:!0,inverted:!0,work:null};var De=Ie;Le.propTypes={notes:u.a.arrayOf(u.a.string).isRequired,onClose:u.a.func.isRequired,x:u.a.number.isRequired,y:u.a.number.isRequired,positionBelow:u.a.bool,positionRight:u.a.bool,inverted:u.a.bool},Le.defaultProps={positionBelow:!0,positionRight:!0,inverted:!1};var Ne=Le,Ve=n(54),Me=(n(464),n(513)),Fe=n(514);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,r.Component);var e,t,n=function(e){return function(){var t,n,r,o=Ue(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=Ue(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==Be(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={show:!1},t}return e=a,(t=[{key:"showImage",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this,t=this.state.show,n=this.props,r=n.size,a=n.children,i=n.src,l=n.style;return t?o.a.createElement(O.a,{style:l,src:i}):o.a.createElement(Me.a,{as:"span",onOnScreen:function(){return e.showImage()}},a&&a,!a&&o.a.createElement(Fe.a,{"data-testid":"loader",active:!0,inline:"centered",size:r}))}}])&&qe(e.prototype,t),a}();ze.propTypes={src:u.a.string.isRequired,size:u.a.string,children:u.a.element,style:u.a.object},ze.defaultProps={size:"tiny",children:null,style:{}};var Ye=ze;function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe={cursor:"pointer"},Ze=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,r.Component);var e=function(e){return function(){var t,n,r,o=Ke(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=Ke(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==Ge(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(t);function t(n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this,n)).state={works:null,error:null,search:""},r}return Xe(t,null,[{key:"workMatchesSearch",value:function(e,t){return e.title.toLowerCase().includes(t)||e.title_slug.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.editor.toLowerCase().includes(t)||e.language.toLowerCase().includes(t)}}]),Xe(t,[{key:"componentDidMount",value:function(){this.loadInfo()}},{key:"onSearchChange",value:function(e){this.setState({search:e.value})}},{key:"getWorkRow",value:function(e,t,n){function r(){c(e.title_slug)}var a=!(1<arguments.length&&void 0!==t)||t,i=!(2<arguments.length&&void 0!==n)||n,l=this.props,c=l.onSelectWork,u=l.loadedWork,s=this.isRelatedWork(e),f=this.isSameAuthor(e),p=u&&u===e.title_slug;return o.a.createElement(d.a.Row,{key:e.title_slug},i&&o.a.createElement(d.a.Cell,{className:"workImage",style:Qe,onClick:r},a&&o.a.createElement(Ye,{style:{width:32},src:Object(I.g)(e.title_slug,64)},o.a.createElement(O.a,{style:{width:32},src:"/book-cover-small.png"})),!a&&o.a.createElement(O.a,{style:{width:32},src:Object(I.g)(e.title_slug,64)})),o.a.createElement(d.a.Cell,{style:Qe,onClick:r},o.a.createElement("div",null,e.title,o.a.createElement("div",{style:{display:"inline-block",float:"right",paddingRight:4}},s&&i&&o.a.createElement(Ve.a,{as:"a",color:"red"},"Related Work"),f&&!p&&i&&o.a.createElement(Ve.a,{as:"a",color:"blue"},"Same Author"),p&&i&&o.a.createElement(Ve.a,{as:"a",color:"green"},"This work"),s&&!i&&o.a.createElement(Ve.a,{as:"a",color:"red",circular:!0,empty:!0}),f&&!p&&!i&&o.a.createElement(Ve.a,{as:"a",color:"blue",circular:!0,empty:!0}))),o.a.createElement("div",{style:{color:"#888"}},e.language,e.author&&" by ".concat(e.author),e.editor&&" (".concat(e.editor,")"))))}},{key:"isRelatedWork",value:function(e){return!!this.props.relatedWorks.find((function(t){return t.title_slug===e.title_slug}))}},{key:"isSameAuthor",value:function(e){var t=this.props.authors;return!(!t||!e.author||!t.find((function(t){return t.name===e.author})))}},{key:"sortWorks",value:function(e){var t=this;return e.sort((function(e,n){return t.isRelatedWork(e)&&!t.isRelatedWork(n)?-1:t.isRelatedWork(n)&&!t.isRelatedWork(e)?1:e.title>n.title})),e}},{key:"loadInfo",value:function(){var e=this;fetch(Object(I.e)()).then((function(e){return e.json()})).then((function(t){e.setState({works:e.sortWorks(t)})})).catch((function(t){e.setState({error:t.toString()})}))}},{key:"render",value:function(){var e=this,n=this.state,r=n.works,a=n.error,i=n.search.toLowerCase(),l=Object(A.a)((function(t,n){e.onSearchChange(n)}),500),c=767<window.innerWidth,u=c?500:250;return o.a.createElement(o.a.Fragment,null,!a&&r&&o.a.createElement("div",null,o.a.createElement(_.a,{onChange:l,style:{width:"100%"},placeholder:"Search..."})),o.a.createElement("div",{style:{maxHeight:400,width:u,overflowY:"auto"}},a&&o.a.createElement(ae.a,{title:"Unable to load the list of works",description:"Unable to get the list of works from the server",message:a}),!a&&r&&o.a.createElement(d.a,{basic:"very",celled:!0,collapsing:!0},o.a.createElement(d.a.Body,null,r.filter((function(e){return t.workMatchesSearch(e,i)})).map((function(t,n){return e.getWorkRow(t,15<n,c)})))),!a&&!r&&o.a.createElement(w.a,null,o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null)))))}}]),t}();function et(e){var t=e.inverted,n=e.onClick;return o.a.createElement(P.a,{info:!0,className:t?"inverted":""},o.a.createElement(P.a.Header,null,"No Book Selected"),o.a.createElement("p",null,"Choose a book above to begin reading."),n&&o.a.createElement("p",null,o.a.createElement(p.a,{onClick:function(){return n()},inverted:t},"Open Library")))}Ze.propTypes={onSelectWork:u.a.func.isRequired,relatedWorks:u.a.arrayOf(u.a.shape),authors:u.a.arrayOf(u.a.string),loadedWork:u.a.string},Ze.defaultProps={relatedWorks:[],authors:[],loadedWork:null};var tt=Ze;et.propTypes={onClick:u.a.func,inverted:u.a.bool},et.defaultProps={inverted:!1,onClick:null};var nt=et,rt=n.p+"images/5a0a1a6aa2a65b08197971f38a43cf6c-Library.svg",ot=(n(465),n(522));function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}(e,t)||it(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(e){var t=e.inverted,n=e.work,a=e.divisions,i=e.divisionReference,l=e.history,c=at(Object(r.useState)(null),2),u=c[0],s=c[1],f=at(Object(r.useState)(null),2),d=f[0],h=f[1];Object(r.useEffect)((function(){var e;u||d||(e=n,fetch(Object(I.b)(e,i)).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){h(e.toString())})))}));var m=0;d?m=1:u&&(m=2);var v,y=t?"inverted":"";return o.a.createElement(ot.a,{className:y},o.a.createElement(ot.a.Content,null,o.a.createElement(O.a,{floated:"right",size:"mini",src:Object(I.g)(n)}),2===m&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ot.a.Header,{style:{lineHeight:"1.2em",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis"}},(20,(v=u.work_title).length>20?"".concat(v.substring(0,17),"..."):v)),o.a.createElement(ot.a.Meta,null,u.division_title)),0===m&&o.a.createElement(Fe.a,{active:!0}),1===m&&o.a.createElement(k.a,{color:"red",name:"attention",size:"large",title:d})),o.a.createElement(ot.a.Content,{extra:!0},o.a.createElement("div",{className:"ui two buttons"},o.a.createElement(p.a,{basic:!0,color:"green",onClick:function(){var e=M.d.apply(void 0,[n].concat(function(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||it(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a)));l.push(e)}},"Read now"))))}ct.propTypes={inverted:u.a.bool,work:u.a.string.isRequired,divisionReference:u.a.string,divisions:u.a.arrayOf(u.a.string),history:u.a.object.isRequired},ct.defaultProps={inverted:!1,divisionReference:null,divisions:[]};var ut=Object(a.h)(ct);function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ft(e){var t=e.inverted,n=N(),a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(r.useState)(0),2),i=a[0],l=a[1];return o.a.createElement("div",null,(n&&0<n.length||0<i)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{inverted:t,as:"h3"},"Most Recently Read",n&&0<n.length&&o.a.createElement(p.a,{floated:"right",onClick:function(){!function(e){((0<arguments.length&&void 0!==e?e:null)||localStorage).removeItem(D)}(),l(i+1)}},"Clear this list")),n&&0<n.length&&o.a.createElement(ot.a.Group,{itemsPerRow:5},n.map((function(e){return o.a.createElement(ut,{key:e.workTitleSlug,work:e.workTitleSlug,divisions:e.divisions,divisionReference:e.divisionReference})}))),(!n||0===n.length)&&0<i&&o.a.createElement(o.a.Fragment,null,"No works in the list of recently read works")))}ft.propTypes={inverted:u.a.bool},ft.defaultProps={inverted:!1};var dt=ft;function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}(e,t)||vt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||vt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){if(e){if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t,n){return t&&gt(e.prototype,t),n&&gt(e,n),e}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Et={bottom:"20px",right:"20px",position:"fixed"},_t={bottom:"20px",left:"20px",position:"fixed"},xt={paddingTop:60},St={height:"100vh",marginTop:0},Ct=Object(A.a)((function(e,t){return fetch(Object(I.b)(e,t))}),500),Ot=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,r.Component);var e=function(e){return function(){var t,n,r,o=kt(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=kt(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==pt(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(t);function t(n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=e.call(this,n)).state={modal:null,data:null,errorTitle:null,errorMessage:null,errorDescription:null,loading:!1,divisions:null,loadedWork:null,referenceValid:!0,referenceValue:"",selectedWord:null,popupX:null,popupY:null,redirectedFrom:null,redirectedTo:null,sidebarVisible:!1},r.lastSetReference=null,r.verseReferences={},r}return bt(t,null,[{key:"hasLongDivisionNames",value:function(e){var t=e.reduce((function(e,t){return t.full_title&&30<t.full_title.length?e+1:e}),0);return 5<t||t===e.length}},{key:"areDescriptorsNames",value:function(e){return e.reduce((function(e,t){return/^([0-9]+|[IVX]+|[A-Z])$/i.test(t.descriptor)?e+1:e}),0)!==e.length}},{key:"getDivisionText",value:function(e,t,n){return t?e.label.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):n?e.descriptor:"".concat(e.type," ").concat(e.descriptor)}},{key:"convertDivisionsToOptions",value:function(e){var n=!t.hasLongDivisionNames(e),r=t.areDescriptorsNames(e);return e.map((function(e){return{key:e.description,text:t.getDivisionText(e,n,r),value:e.descriptor}}))}},{key:"workSearch",value:function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.text.toLowerCase().includes(n)||e.key.toLowerCase().includes(n)}))}},{key:"getPlaceholder",value:function(e){var t=0<arguments.length&&void 0!==e&&e;return o.a.createElement("div",{style:{paddingTop:16}},o.a.createElement(w.a,{inverted:t},o.a.createElement(w.a.Header,null,o.a.createElement(w.a.Line,null)),o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null)),o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null)),o.a.createElement(w.a.Paragraph,null,o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null),o.a.createElement(w.a.Line,null))))}}]),bt(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultWork,n=[e.division0,e.division1,e.division2,e.division3,e.division4,e.leftovers].filter((function(e){return e}));t&&this.loadChapter.apply(this,[t].concat(mt(n)))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.location,r=t.match,o=this.state,a=o.redirectedTo,i=o.data,l=o.highlightedVerse,c=o.loadedWork,u=this.verseReferences[n.pathname];if(i&&i.chapter&&u&&u.chapter===i.chapter.full_descriptor&&c&&c===r.params.work){var s=u.verse;l!==s&&this.setState({highlightedVerse:s,referenceValue:u.referenceValue})}else if(n.pathname!==e.location.pathname&&a!==n.pathname){var f=[r.params.division0,r.params.division1,r.params.division2,r.params.division3,r.params.division4,r.params.leftovers].filter((function(e){return e}));this.loadChapter.apply(this,[r.params.work].concat(mt(f)))}}},{key:"onVerseClick",value:function(e,t,n,r){var o=this.state.data;this.addVerseToHistoryList(r,o.chapter.full_descriptor,t,e),this.setState({referenceValue:e,referenceValid:!0}),this.props.history.push(r)}},{key:"onWordClick",value:function(e,t,n,r,o){this.setState({selectedWord:e,modal:"word",popupX:t,popupY:n,popupPositionRight:r,popupPositionBelow:o})}},{key:"onNoteClick",value:function(e,t,n,r,o,a){this.setState({selectedNote:e,modal:"note",popupX:n,popupY:r,popupPositionRight:o,popupPositionBelow:a})}},{key:"onSelectWork",value:function(e){var t=this.state,n=t.data,r=t.divisions,o=!1;n&&n.related_works&&(o=n.related_works.find((function(t){return t.title_slug===e}))),o?this.navigateToChapter.apply(this,[e].concat(mt(r))):this.navigateToChapter(e)}},{key:"onKeyPressed",value:function(e){"Enter"===e.key&&this.goToReference()}},{key:"getDialogs",value:function(){var e=this,t=this.state,n=t.modal,r=t.data,a=t.loading,i=t.loadedWork;return o.a.createElement(o.a.Fragment,null,r&&!a&&"aboutWork"===n&&o.a.createElement(de,{work:i,onClose:function(){return e.closeModal()}}),r&&!a&&"downloadWork"===n&&o.a.createElement(Ee,{work:i,onClose:function(){return e.closeModal()}}))}},{key:"getPopups",value:function(){var e=this,t=this.state,n=t.modal,r=t.data,a=t.loading,i=t.selectedWord,l=t.popupX,c=t.popupY,u=t.popupPositionRight,s=t.popupPositionBelow,f=t.selectedNote,d=t.loadedWork,p=this.props.inverted;return o.a.createElement(o.a.Fragment,null,r&&!a&&"word"===n&&o.a.createElement(De,{inverted:p,positionBelow:s,positionRight:u,x:l,y:c,word:i,work:d,onClose:function(){return e.closeModal()}}),r&&!a&&"note"===n&&o.a.createElement(Ne,{inverted:p,positionBelow:s,positionRight:u,x:l,y:c,notes:f,onClose:function(){return e.closeModal()}}))}},{key:"setBookSelectionOpen",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;this.setState({bookSelectionOpen:t})}},{key:"setErrorState",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:"",o=2<arguments.length&&void 0!==n?n:null;this.setState({errorMessage:o,errorDescription:r,errorTitle:e})}},{key:"setSidebarVisible",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;this.setState({sidebarVisible:t})}},{key:"addVerseToHistoryList",value:function(e,t,n,r){this.verseReferences[e]={chapter:t,verse:n,referenceValue:r}}},{key:"updateHistory",value:function(e){for(var t=this.props,n=t.history,r=t.location,o=arguments.length,a=new Array(1<o?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];var l=M.d.apply(void 0,[e].concat(a));return l!==r.pathname&&(n.push(l),!0)}},{key:"navigateToChapter",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.updateHistory.apply(this,[e].concat(n))}},{key:"loadChapter",value:function(e){for(var t=this,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e?(this.setState({loading:!0,bookSelectionOpen:!1,modal:null,errorTitle:null,errorMessage:null,errorDescription:null,redirectedFrom:null,redirectedTo:null,highlightedVerse:null}),fetch(I.a.apply(void 0,[e].concat(r))).then((function(e){return Promise.all([e.status,e.json()])})).then((function(n){var o=ht(n,2),a=o[0],i=o[1];if(200<=a&&a<300){var l=null,c=null;i.work.title_slug!==e&&(l=M.d.apply(void 0,[e].concat(r)),c=M.d.apply(void 0,[i.work.title_slug].concat(r))),t.setState({data:i,loading:!1,loadedWork:i.work.title_slug,divisions:r,referenceValue:i.reference_descriptor,referenceValid:!0,redirectedFrom:l,redirectedTo:c,highlightedVerse:i.verse_to_highlight}),V(e,r,i.reference_descriptor),t.addVerseToHistoryList(M.d.apply(void 0,[e].concat(r)),i.chapter.full_descriptor,i.verse_to_highlight,i.chapter.description),l&&t.updateHistory.apply(t,[i.work.title_slug].concat(r)),t.preloadNextChapter()}else t.setErrorState("Work could not be found","Yikes. The given work is not recognized as a valid work.")})).catch((function(e){t.setErrorState("Unable to load the content","The given chapter could not be loaded from the server",e.toString())}))):this.setState({bookSelectionOpen:!1,modal:null,errorTitle:null,errorMessage:null,errorDescription:null,redirectedFrom:null,redirectedTo:null,highlightedVerse:null,data:null,loading:!1,loadedWork:null,divisions:null,referenceValue:null,referenceValid:!0})}},{key:"preloadNextChapter",value:function(){var e=this.state,t=e.data,n=e.loadedWork;t.next_chapter&&fetch(Object(I.a)("".concat(n,"/").concat(t.next_chapter.full_descriptor)))}},{key:"preloadPriorChapter",value:function(){var e=this.state,t=e.data,n=e.loadedWork;t.previous_chapter&&fetch(Object(I.a)("".concat(n,"/").concat(t.previous_chapter.full_descriptor)))}},{key:"openAboutModal",value:function(){this.setState({modal:"about"})}},{key:"openStartPage",value:function(){this.props.history.push(Object(M.f)())}},{key:"preloadChapters",value:function(){this.preloadNextChapter(),this.preloadPriorChapter()}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"openWorkInfoModal",value:function(){this.setState({modal:"aboutWork"})}},{key:"openSearch",value:function(){var e=this.props.history,t=this.state,n=t.divisions,r=t.loadedWork,o="work:".concat(r);e.push(Object(M.e)(o),{work:r,divisions:n})}},{key:"openDownloadModal",value:function(){this.setState({modal:"downloadWork"})}},{key:"changeWork",value:function(e){var t=this.state.divisions;this.navigateToChapter.apply(this,[e].concat(mt(t)))}},{key:"changeChapter",value:function(e,t){var n=this.state.loadedWork;this.navigateToChapter(n,t.value)}},{key:"changeReference",value:function(e,t){var n=this,r=this.state.loadedWork;r&&t.value&&(this.setState({referenceValue:t.value,referenceValid:!0}),this.lastSetReference=t.value,Ct(r,t.value).then((function(e){return Promise.all([e.status,e.json()])})).then((function(e){var r=ht(e,2),o=r[0],a=r[1];n.lastSetReference===t.value&&(200===o?n.setState({divisions:a.divisions,referenceValue:t.value,referenceValid:!0}):n.setState({referenceValue:t.value,referenceValid:!1}))})).catch((function(e){n.setErrorState("Unable to load the content","The given chapter could not be loaded from the server",e.toString())})))}},{key:"goToReference",value:function(){var e=this,t=this.state,n=t.loadedWork,r=t.referenceValue;n&&r&&fetch(Object(I.b)(n,r)).then((function(e){return Promise.all([e.status,e.json()])})).then((function(t){var o=ht(t,2),a=o[0],i=o[1];200===a?(e.setState({divisions:i.divisions,referenceValue:r,referenceValid:!0}),e.navigateToChapter.apply(e,[n].concat(mt(i.divisions)))):e.setState({referenceValue:r,referenceValid:!1})})).catch((function(t){e.setErrorState("Unable to load the content","The given chapter could not be loaded from the server",t.toString())}))}},{key:"goToNextChapter",value:function(){var e=this.state,t=e.data,n=e.loadedWork;t.next_chapter&&this.navigateToChapter(n,t.next_chapter.full_descriptor)}},{key:"goToPriorChapter",value:function(){var e=this.state,t=e.data,n=e.loadedWork;t.previous_chapter&&this.navigateToChapter(n,t.previous_chapter.full_descriptor)}},{key:"render",value:function(){var e=this,n=this.state,r=n.modal,a=n.data,c=n.errorDescription,u=n.loading,s=n.referenceValid,d=n.referenceValue,h=n.bookSelectionOpen,m=n.errorTitle,v=n.errorMessage,y=n.redirectedFrom,g=n.sidebarVisible,w=n.loadedWork,A=n.highlightedVerse,W=this.props.inverted,L="",D=d;a&&(L=a.chapter.description,""===d&&(D=L));var N="";W&&(N=" inverted");var V;V=a&&!u?2:m?1:u&&!m?0:3;var M=a&&a.related_works?a.related_works:[],F=a&&a.authors?a.authors.map((function(e){return e.name})):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{inverted:W,style:{zIndex:103},className:"control ".concat(N),fixed:"top"},o.a.createElement(l.a,null,o.a.createElement(i.a.Item,{name:"works",onClick:function(){return e.setSidebarVisible(!0)}},o.a.createElement(k.a,{name:"bars"})),o.a.createElement(E.a,{content:o.a.createElement(tt,{relatedWorks:M,authors:F,onSelectWork:function(t){return e.onSelectWork(t)},loadedWork:w}),on:"click",position:"bottom left",pinned:!0,onClose:function(){return e.setBookSelectionOpen(!1)},onOpen:function(){return e.setBookSelectionOpen(!0)},open:h,trigger:o.a.createElement(i.a.Item,{name:"Library"},o.a.createElement("img",{style:{width:16},src:rt,alt:"Library"}))}),o.a.createElement(i.a.Item,null,o.a.createElement(_.a,{inverted:W,className:"referenceJumpInput",action:o.a.createElement(p.a,{disabled:!s,inverted:W,onClick:function(){return e.goToReference()},basic:!0},"Go"),placeholder:"Jump to reference...",value:D,error:!s,onChange:function(t,n){return e.changeReference(t,n)},onKeyPress:function(t,n){return e.onKeyPressed(t,n)}})),o.a.createElement("div",{style:{float:"right",marginLeft:"auto",marginTop:11}},o.a.createElement(x.a,{minWidth:768},o.a.createElement(S.a,{icon:"ellipsis vertical",direction:"left"},o.a.createElement(S.a.Menu,null,o.a.createElement(S.a.Item,{text:"About TextCritical.net",onClick:function(){return e.openAboutModal()}}),o.a.createElement(S.a.Item,{text:"Go to Start Page",onClick:function(){return e.openStartPage()}})))))),2===V&&o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{icon:!0,inverted:W,style:_t,className:"priorPage ".concat(N),disabled:null===a.previous_chapter,onClick:function(){return e.goToPriorChapter()}},o.a.createElement(k.a,{name:"left chevron"})),o.a.createElement(p.a,{icon:!0,inverted:W,style:Et,className:"nextPage ".concat(N),disabled:null===a.next_chapter,onClick:function(){return e.goToNextChapter()}},o.a.createElement(k.a,{name:"right chevron"})))),2===V&&o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{as:i.a,animation:"overlay",icon:"labeled",style:{width:200,paddingTop:50},inverted:!0,visible:g,onHide:function(){return e.setSidebarVisible(!1)},vertical:!0,width:"thin"},o.a.createElement(O.a,{src:Object(I.g)(w,400)}),o.a.createElement(i.a.Item,{as:"a",onClick:function(){return e.openWorkInfoModal()}},"Information"),o.a.createElement(i.a.Item,{as:"a",onClick:function(){return e.openDownloadModal()}},"Download"),o.a.createElement(i.a.Item,{as:"a",onClick:function(){return e.openSearch()}},"Search")),o.a.createElement(C.a.Pushable,{as:R.a,basic:!0,style:St,className:"".concat(N)},o.a.createElement(C.a.Pusher,null,o.a.createElement(l.a,{className:"underMenu ".concat(N)},this.getDialogs(),this.getPopups(),o.a.createElement(j.a,{inverted:W},o.a.createElement(j.a.Row,null,o.a.createElement(j.a.Column,{width:8},o.a.createElement(f.a,{inverted:W,floated:"left",as:"h3"},a.chapter.parent_division&&o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{inline:!0,floating:!0,deburr:!0,scrolling:!0,search:t.workSearch,options:t.convertDivisionsToOptions(a.divisions),value:a.chapter.parent_division.descriptor,onChange:function(t,n){return e.changeChapter(t,n)}}),o.a.createElement("div",{style:{display:"inline-block",paddingLeft:6}},a.chapter.type," ".concat(a.chapter.descriptor))))),o.a.createElement(j.a.Column,{width:8},o.a.createElement(l.a,{textAlign:"right"},o.a.createElement(f.a,{inverted:W,floated:"right",as:"h3"},a.work.title))))),o.a.createElement("div",{style:{marginTop:6}}),a&&a.warnings.map((function(e){return o.a.createElement(P.a,{className:N,warning:!0,key:e[0],header:e[0],content:e[1]})})),y&&o.a.createElement(P.a,{info:!0,className:N},o.a.createElement("p",null,"The URL you were using was old so you were redirected to the new one. You may want to update your shortcuts.")),1<a.total_chapters&&1<a.total_chapters_in_book&&o.a.createElement(o.a.Fragment,null,o.a.createElement(R.a.Group,{horizontal:!0,style:{border:0,marginBottom:4},className:"".concat(N)},o.a.createElement(R.a,{basic:!0,inverted:!0,style:{padding:0}},a.completed_chapters_in_book," ","of"," ",a.total_chapters_in_book," ","chapters"," "),o.a.createElement(R.a,{basic:!0,inverted:!0,style:{textAlign:"right",padding:0}},Math.round(a.progress_in_book),"% through the book")),o.a.createElement(T.a,{className:"bookProgress",color:"blue",style:{margin:"0 0 8px 0"},percent:a.progress_in_book,size:"tiny"})),o.a.createElement(oe,{chapter:a.chapter,content:a.content,work:a.work,onVerseClick:function(t,n,r,o,a,i){e.onVerseClick(t,n,r,o,a,i)},onWordClick:function(t,n,r,o,a){e.onWordClick(t,n,r,o,a)},onNoteClick:function(t,n,r,o,a){e.onNoteClick(t,n,r,o,a)},onClickAway:function(){return e.closeModal()},highlightedVerse:A,inverted:W}))))),1===V&&o.a.createElement(l.a,{style:xt,className:"".concat(N)},o.a.createElement(ae.a,{inverted:W,title:m,description:c,message:v})),0===V&&o.a.createElement(l.a,{style:xt,className:"".concat(N)},t.getPlaceholder(W)),3===V&&o.a.createElement(l.a,{style:xt,className:"".concat(N)},o.a.createElement("div",{style:{paddingTop:24}},o.a.createElement(nt,{onClick:function(){return e.setBookSelectionOpen()},inverted:W}),o.a.createElement(dt,{inverted:W}))),"about"===r&&o.a.createElement(b,{onClose:function(){return e.closeModal()}}))}}]),t}();Ot.propTypes={inverted:u.a.bool,defaultWork:u.a.string,division0:u.a.string,division1:u.a.string,division2:u.a.string,division3:u.a.string,division4:u.a.string,leftovers:u.a.string,location:u.a.object.isRequired,history:u.a.object.isRequired,match:u.a.object.isRequired},Ot.defaultProps={inverted:!1,defaultWork:null,division0:null,division1:null,division2:null,division3:null,division4:null,leftovers:null};var Rt=Object(a.h)(Ot);function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(a,r.Component);var e,t,n=function(e){return function(){var t,n,r,o=At(e);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()){var a=At(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return n=this,!(r=t)||"object"!==jt(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={modal:null},t}return e=a,(t=[{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"openAboutModal",value:function(){this.setState({modal:"about"})}},{key:"render",value:function(){var e=this,t=this.state.modal,n=this.props,r=n.inverted,a=n.includeMenu,c=n.match.params,u=c.work,s=c.division0,f=c.division1,d=c.division2,p=c.division3,h=c.division4,m=c.leftovers;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(i.a,{inverted:!r,attached:"top"},o.a.createElement(l.a,null,o.a.createElement(i.a.Item,{style:{backgroundColor:"#009ec2"}},o.a.createElement("img",{alt:"",style:{width:22,height:22},src:"book.png"})),o.a.createElement(i.a.Item,{name:"about",active:!1,content:"About",onClick:function(){return e.openAboutModal()}}),o.a.createElement(i.a.Menu,{position:"right"},o.a.createElement("div",{className:"ui right aligned category search item"},o.a.createElement("div",{className:"ui transparent icon input"},o.a.createElement("input",{className:"prompt",type:"text",placeholder:"Search works..."}),o.a.createElement("i",{className:"search link icon"})),o.a.createElement("div",{className:"results"}))))),"about"===t&&o.a.createElement(b,{onClose:function(){return e.closeModal()}}),o.a.createElement(Rt,{defaultWork:u,inverted:r,division0:s,division1:f,division2:d,division3:p,division4:h,leftovers:m}))}}])&&Pt(e.prototype,t),a}();It.propTypes={inverted:u.a.bool,includeMenu:u.a.bool,match:u.a.object,location:u.a.object,history:u.a.object},It.defaultProps={inverted:!1,includeMenu:!1,match:null,location:null,history:null},t.default=Object(a.h)(It)}}]);
//# sourceMappingURL=3.js.map