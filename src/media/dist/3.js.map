{"version":3,"sources":["webpack:///./src/components/URLs/index.jsx","webpack:///./src/components/Endpoints/index.js","webpack:///./src/components/ErrorMessage/index.jsx","webpack:///./src/components/PopupDialog/PopupDialog.scss?1847","webpack:///./src/components/PopupDialog/PopupDialog.scss","webpack:///./src/components/Reader/Chapter.scss?d12e","webpack:///./src/components/Reader/Chapter.scss","webpack:///./src/components/WordInformation/WordLemma.css?af8a","webpack:///./src/components/WordInformation/WordLemma.css","webpack:///./src/components/Reader/index.scss?c721","webpack:///./src/components/Reader/index.scss","webpack:///./src/components/AboutDialog/index.jsx","webpack:///./src/components/PopupDialog/index.jsx","webpack:///./src/components/Reader/Chapter.jsx","webpack:///./src/components/AboutWorkDialog/index.jsx","webpack:///./src/components/WorkDownloadDialog/index.jsx","webpack:///./src/components/WordInformation/WordLemma.jsx","webpack:///./src/components/WordInformation/index.jsx","webpack:///./src/components/WordInformation/ExternalLookupLinks.jsx","webpack:///./src/components/WordInformation/WordInformationPopup.jsx","webpack:///./src/components/FootnotePopup/index.jsx","webpack:///./src/components/LazyImage/index.jsx","webpack:///./src/components/BookSelection/index.jsx","webpack:///./src/components/Reader/NoWorkSelected.jsx","webpack:///./src/components/Icons/Library.svg","webpack:///./src/components/Reader/index.jsx","webpack:///./src/components/Utils/index.jsx","webpack:///./src/App.jsx"],"names":["READ_WORK","work","divisionReference","divisions","divisionsFiltered","filter","entry","length","join","SEARCH","ignoreDiacritics","searchRelatedForms","page","url","GOOGLE_SEARCH","PERSEUS_WORD_LOOKUP","LOGEION_WORD_LOOKUP","config","getHostConfig","origin","window","location","hostname","ENDPOINT_READ_WORK","ENDPOINT_WORK_INFO","ENDPOINT_WORK_IMAGE","width","ENDPOINT_WORK_DOWNLOAD","format","ENDPOINT_RESOLVE_REFERENCE","reference","ENDPOINT_WORD_PARSE","word","ENDPOINT_WORKS_LISTS","ENDPOINT_SEARCH","query","relatedFormsConverted","ignoreDiacriticsConverted","encodeURIComponent","i","ErrorMessage","title","description","message","inverted","color","as","style","marginBottom","propTypes","PropTypes","string","isRequired","bool","defaultProps","api","content","__esModule","default","module","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","AboutDialog","Component","Table","Row","Cell","link","linkName","prefix","target","rel","href","onClose","this","props","Modal","defaultOpen","closeIcon","Header","icon","Content","basic","celled","collapsing","Body","getInfoRow","getInfoLinkRow","Actions","Button","onClick","func","getPositionRecommendation","event","clientX","innerWidth","clientY","innerHeight","PopupDialog","isSmallMode","getContent","Segment","className","positionBelow","segmentStyleTinyBelow","segmentStyleTinyTop","segmentStyle","padding","Icon","closeButtonStyle","children","footer","footerStyle","x","y","positionRight","float","cursor","marginRight","position","maxHeight","overflowY","zIndex","top","left","bottom","height","Portal","open","number","element","Chapter","clickListener","t","highlightOverridden","handleClick","addHandler","removeHandler","nodeType","textContent","childEntries","Array","from","childNodes","reduce","accum","child","concat","getText","err","highlightedVerse","options","replace","attribs","data-verse","data-verse-descriptor","id","domToReact","reactElement","parse","ref","wrapper","handler","type","current","addEventListener","removeEventListener","onWordClick","layerX","layerY","getElementsByClassName","map","highlight","classList","remove","verse","find","attributes","nodeValue","parentElement","toggle","setTimeout","highlightVerse","preventDefault","verseDescriptorElem","name","verseDescriptor","verseElem","onVerseClick","contentsElem","document","getElementById","contents","onNoteClick","onClickAway","includes","handleClickWord","handleClickVerse","handleClickEmpty","handleClickNote","createRef","getChapterContent","AboutWorkDialog","state","data","error","loadInfo","fetch","then","res","json","setState","e","toString","size","scrolling","display","Image","src","language","source","marginTop","source_description","wiki_info","summary","Placeholder","image","Line","Paragraph","EPUB_FORMAT","WorkDownloadDialog","value","stryle","Form","Field","Radio","label","checked","onChange","d","handleChange","primary","download","WordLemma","lexiconEntries","Message","warning","lexiconEntry","key","lemma_lexical_form","dangerouslySetInnerHTML","__html","definition","arrayOf","shape","WordInformation","loading","wordInfo","activeIndex","to","getWordInfo","prevProps","titleProps","index","newIndex","mode","ignoring_diacritics","Accordion","fluid","Fragment","form","Title","active","lemma","meaning","lexicon_entries","getSearchLinks","ExternalLookupLinks","WordInformationDialog","FootnoteDialog","notes","note","LazyImage","show","Visibility","onOnScreen","showImage","Loader","data-testid","inline","object","ClickStyle","BookSelection","c","works","search","toLowerCase","title_slug","author","editor","onSelectWork","lazyLoad","onLargeScreen","loadedWork","isRelated","isRelatedWork","isSameAuthor","isLoadedWork","paddingRight","Label","circular","empty","relatedWorks","relatedWork","authors","sort","a","b","sortWorks","searchLowerCase","onChangeDebounced","AwesomeDebouncePromise","onSearchChange","Input","placeholder","workMatchesSearch","getWorkRow","NoWorkSelected","info","NextPageStyle","right","PriorPageStyle","ContainerStyle","paddingTop","SidebarStyle","resolveReferenceDebounced","titleSlug","Reader","modal","errorTitle","errorMessage","errorDescription","referenceValid","referenceValue","selectedWord","popupX","popupY","redirectedFrom","redirectedTo","sidebarVisible","lastSetReference","verseReferences","longNames","accumulator","division","full_title","test","descriptor","useTitles","descriptorsAreNames","txt","charAt","toUpperCase","substr","hasLongDivisionNames","areDescriptorsNames","text","getDivisionText","queryLower","opt","defaultWork","division0","division1","division2","division3","division4","leftovers","loadChapter","match","existingChapter","pathname","chapter","full_descriptor","params","highlightedVerseRef","addVerseToHistoryList","history","popupPositionRight","popupPositionBelow","selectedNote","related_works","navigateToChapter","goToReference","closeModal","FootnotePopup","bookSelectionOpen","visible","workUrl","updateHistory","Promise","all","status","reference_descriptor","verse_to_highlight","preloadNextChapter","setErrorState","next_chapter","previous_chapter","preloadPriorChapter","q","referenceInfo","referenceDescription","classNameSuffix","Menu","fixed","Container","Item","setSidebarVisible","Popup","on","pinned","setBookSelectionOpen","onOpen","trigger","LibraryIcon","alt","action","disabled","changeReference","onKeyPress","onKeyPressed","marginLeft","Responsive","minWidth","Dropdown","direction","openAboutModal","goToPriorChapter","goToNextChapter","Sidebar","animation","onHide","vertical","openWorkInfoModal","openDownloadModal","openSearch","Pushable","Pusher","getDialogs","getPopups","Grid","Column","floated","parent_division","floating","deburr","workSearch","convertDivisionsToOptions","changeChapter","paddingLeft","textAlign","warnings","header","total_chapters","total_chapters_in_book","Group","horizontal","border","completed_chapters_in_book","Math","round","progress_in_book","Progress","margin","percent","getPlaceholder","withRouter","App","includeMenu","attached","backgroundColor"],"mappings":"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","file":"3.bundle.js","sourcesContent":["/**\n * This page provides helper functions for creating URLs for the website.\n */\n\nexport function READ_WORK(work = '', ...divisions) {\n  let divisionReference = '';\n\n  const divisionsFiltered = divisions.filter((entry) => entry);\n\n  if (divisions.length > 0 && work) {\n    divisionReference = divisionsFiltered.join('/');\n    return `/work/${work}/${divisionReference}`;\n  }\n\n  return `/work/${work}`;\n}\n\nexport function SEARCH(\n  q = '',\n  ignoreDiacritics = false,\n  searchRelatedForms = false,\n  page = '',\n) {\n  let url = `/search?q=${q}`;\n\n  if (page) {\n    url += `&page=${page}`;\n  }\n\n  if (ignoreDiacritics) {\n    url += '&ignore_diacritics=1';\n  }\n\n  if (searchRelatedForms) {\n    url += '&include_related=1';\n  }\n\n  return url;\n}\n\nexport function GOOGLE_SEARCH(q = '') {\n  return `https://www.google.com/search?q=${q}`;\n}\n\nexport function PERSEUS_WORD_LOOKUP(word = '') {\n  return `http://www.perseus.tufts.edu/hopper/morph?l=${word}&la=greek`;\n}\n\nexport function LOGEION_WORD_LOOKUP(word = '') {\n  return `https://logeion.uchicago.edu/${word}`;\n}\n","\n/**\n * The following provides a way to map REST calls to another service (for development).\n */\nconst config = {\n  // localhost: 'http://localhost:8080',\n};\n\n/**\n * This function determines what host to use for REST calls based on the hostname.\n * @param {*} origin The host to find the REST call domain for\n */\nexport function getHostConfig(origin = window.location.hostname) {\n  if (origin in config) {\n    return config[origin];\n  }\n\n  return '';\n}\n\nexport function ENDPOINT_READ_WORK(work = '', ...divisions) {\n\n  let divisionReference = '';\n\n  if (divisions.length > 0 && work) {\n    divisionReference = divisions.join('/');\n    return `${getHostConfig()}/api/work/${work}/${divisionReference}`;\n  }\n\n  return `${getHostConfig()}/api/work/${work}`;\n}\n\nexport function ENDPOINT_WORK_INFO(work) {\n  return `${getHostConfig()}/api/work_info/${work}`;\n}\n\nexport function ENDPOINT_WORK_IMAGE(work, width = 100) {\n  return `${getHostConfig()}/api/work_image/${work}?width=${width}`;\n}\n\nexport function ENDPOINT_WORK_DOWNLOAD(work, format = 'epub') {\n  return `${getHostConfig()}/api/download/work/${work}?format=${format}`;\n}\n\nexport function ENDPOINT_RESOLVE_REFERENCE(work, reference) {\n  return `${getHostConfig()}/api/resolve_reference/?work=${work}&ref=${reference}`;\n}\n\nexport function ENDPOINT_WIKI_INFO(search, search2 = null, search3 = null) {\n  const searchParams = [search, search2, search3].filter((e) => e != null);\n  return `${getHostConfig()}/api/wikipedia_info/${searchParams.join('/')}`;\n}\n\nexport function ENDPOINT_WORD_PARSE(word) {\n  return `${getHostConfig()}/api/word_parse/${word}`;\n}\n\nexport function ENDPOINT_WORKS_LISTS() {\n  return `${getHostConfig()}/api/works`;\n}\n\nexport function ENDPOINT_VERSION_INFO() {\n  return `${getHostConfig()}/api/version_info`;\n}\n\nexport function ENDPOINT_SEARCH(query, page = 1, relatedForms = false, ignoreDiacritics = false) {\n  let relatedFormsConverted = 0;\n  if (relatedForms) {\n    relatedFormsConverted = 1;\n  }\n\n  let ignoreDiacriticsConverted = 0;\n  if (ignoreDiacritics) {\n    ignoreDiacriticsConverted = 1;\n  }\n\n  return `${getHostConfig()}/api/search/${encodeURIComponent(query)}?page=${page}&related_forms=${relatedFormsConverted}&ignore_diacritics=${ignoreDiacriticsConverted}`;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Header, Segment } from 'semantic-ui-react';\n\n/**\n * This class renders the content of chapter of a work.\n */\nfunction ErrorMessage({\n  title, description, message, inverted,\n}) {\n  return (\n    <Segment color=\"red\" inverted={inverted}>\n      <Header as=\"h3\">{title}</Header>\n      {description && (\n        description\n      )}\n      {message && description && (\n        <div style={{ marginBottom: 12 }} />\n      )}\n      { message }\n    </Segment>\n  );\n}\n\nErrorMessage.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  message: PropTypes.string.isRequired,\n  inverted: PropTypes.bool,\n};\n\nErrorMessage.defaultProps = {\n  description: null,\n  inverted: false,\n};\n\nexport default ErrorMessage;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./PopupDialog.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ui.inverted.segment.popupDialog{background-color:#2B2B2E;border:1px solid #444;-webkit-box-shadow:0 15px 20px rgba(0,0,0,0.5);box-shadow:0 15px 20px rgba(0,0,0,0.5)}.popupDialog{z-index:100}.ui.inverted.segment.popupDialogFooter{border-top:1px solid #202023;background-color:#202023}.ui.segment.popupDialogFooter{border-top:1px solid #DDD;background-color:#F6F6F6}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./Chapter.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".view_read_work .speaker{font-weight:bold;display:block;margin-top:12px}.view_read_work .milestone{color:#999999}.view_read_work [data-rend=italics]{font-style:italic}.view_read_work .milestone[data-n].milestone[data-unit]:after{font-size:smaller;margin:3px;content:\\\"[\\\" attr(data-unit) \\\" \\\" attr(data-n) \\\"]\\\"}.view_read_work .milestone[data-unit=para]{display:block;padding-top:12px}.view_read_work .l{display:block;margin-left:24px}.view_read_work .gap{content:\\\"...\\\"}.view_read_work .quote,.view_read_work .q{font-style:italic}.view_read_work .bibl{margin-left:3px;margin-right:3px;font-weight:bold}.view_read_work .bibl::before{content:\\\"[\\\"}.view_read_work .bibl::after{content:\\\"]\\\"}.view_read_work .docauthor{display:block;padding-bottom:16px}.view_read_work .label:not(.block) .label{margin-left:8px;margin-right:4px}.view_read_work .note-tag{margin-left:4px;margin-right:2px;cursor:hand;cursor:pointer}.view_read_work .read-more{margin-top:16px;display:block}.view_read_work .lb{display:block}.view_read_work .div3{padding-top:16px;display:block}.view_read_work .quote>.title{font-weight:bold;display:block}.view_read_work .castlist:before{content:\\\"Cast list: \\\"}.view_read_work .castlist>.castitem:after{content:\\\", \\\"}.view_read_work .castlist>.castitem:last-child:after{content:\\\"\\\"}.view_read_work .argument{font-style:italic}.view_read_work .p{margin-bottom:16px;display:block}.view_read_work .lemma{text-decoration:underline;font-weight:bold}.view_read_work .orth{font-weight:bold;font-size:14pt;display:block}.view_read_work .etym{display:block;margin-top:12px;font-weight:bold}.view_read_work .sense{display:block;margin-left:32px}.view_read_work .hide{display:none}.view_read_work{font-family:\\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif}.view_read_work .icon-info-sign{font-family:\\\"Icons\\\";font-style:normal}.view_read_work .icon-info-sign:before{content:\\\"\\\\f129\\\"}.verse.number{font-weight:bold}.inverted .verse.number{color:white}.verse-container{display:inline;line-height:25px}.block{display:block;margin-top:12px}.verse-link{padding:0 4px}.verse-link:visited{color:#EEE}.verse-link:active{color:#EEE}.verse-link:link{color:#EEE}.verse-link:hover{color:#08C}.verse-link.highlighted{background-color:red;border-radius:2px}.verse-link.highlighted .verse.number{color:white}.inverted{background-color:#2B2B2E;color:#F9F9FA}.no_definition_entries{font-style:italic}.word.highlighted,.word.searched{border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;color:white}.word.highlighted{background-color:#49AFCD}.word.searched{background-color:#468847}.division-2{padding-left:24px}.division-3{padding-left:48px}.division-4{padding-left:72px}.division-5{padding-left:96px}.verse .word{cursor:pointer;cursor:hand}.verse .word:hover{text-decoration:underline}@media print{.view_read_work .note-tag{display:none}}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./WordLemma.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".view_lexicon .speaker {\\n  font-weight: bold;\\n  display: block;\\n  margin-top: 12px;\\n}\\n.view_lexicon .milestone {\\n  color: #999999;\\n}\\n.view_lexicon [data-rend=\\\"italics\\\"] {\\n  font-style: italic;\\n}\\n.view_lexicon .milestone[data-n].milestone[data-unit]:after {\\n  font-size: smaller;\\n  margin: 3px;\\n  content: \\\"[\\\" attr(data-unit) \\\" \\\" attr(data-n) \\\"]\\\";\\n}\\n.view_lexicon .milestone[data-unit=\\\"para\\\"] {\\n  display: block;\\n  padding-top: 12px;\\n}\\n.view_lexicon .l {\\n  display: block;\\n  margin-left: 24px;\\n}\\n.view_lexicon .gap {\\n  content: \\\"...\\\";\\n}\\n.view_lexicon .quote,\\n.view_lexicon .q {\\n  font-style: italic;\\n}\\n.view_lexicon .bibl {\\n  margin-left: 3px;\\n  margin-right: 3px;\\n  font-weight: bold;\\n}\\n.view_lexicon .bibl::before {\\n  content: \\\"[\\\";\\n}\\n.view_lexicon .bibl::after {\\n  content: \\\"]\\\";\\n}\\n.view_lexicon .docauthor {\\n  display: block;\\n  padding-bottom: 16px;\\n}\\n.view_lexicon .label:not(.block) .label {\\n  margin-left: 8px;\\n  margin-right: 4px;\\n}\\n.view_lexicon .note-tag {\\n  margin-left: 4px;\\n  margin-right: 2px;\\n  cursor: hand;\\n  cursor: pointer;\\n}\\n.view_lexicon .read-more {\\n  margin-top: 16px;\\n  display: block;\\n}\\n\\n.view_lexicon .lb {\\n  display: block;\\n}\\n\\n.view_lexicon .div3 {\\n  padding-top: 16px;\\n  display: block;\\n}\\n\\n.view_lexicon .quote > .title {\\n  font-weight: bold;\\n  display: block;\\n}\\n\\n.view_lexicon .p {\\n  margin-bottom: 16px;\\n  display: block;\\n}\\n\\n.view_lexicon .lemma {\\n  text-decoration: underline;\\n  font-weight: bold;\\n}\\n\\n.view_lexicon .orth {\\n  font-weight: bold;\\n  display: block;\\n}\\n\\n.view_lexicon .etym {\\n  display: block;\\n  margin-top: 12px;\\n  font-weight: bold;\\n}\\n\\n/**\\n * Style the sense entries so that they are nested accordingly\\n */\\n.view_lexicon .sense {\\n  display: block;\\n  margin-left: 15px;\\n  margin-top: 8px;\\n}\\n\\n/**\\n * Set the margins\\n */\\n.view_lexicon .sense[data-level=\\\"2\\\"] {\\n  margin-left: 30px;\\n}\\n\\n.view_lexicon .sense[data-level=\\\"3\\\"] {\\n  margin-left: 45px;\\n}\\n\\n.view_lexicon .sense[data-level=\\\"4\\\"] {\\n  margin-left: 60px;\\n}\\n\\n.view_lexicon .sense[data-level=\\\"5\\\"] {\\n  margin-left: 75px;\\n}\\n\\n.view_lexicon .sense[data-level=\\\"6\\\"] {\\n  margin-left: 90px;\\n}\\n\\n/**\\n * Show the N indicator (\\\"1.\\\", \\\"2.\\\", etc.)\\n */\\n.view_lexicon .sense[data-level]:before {\\n  content: \\\"\\\" attr(data-n) \\\". \\\";\\n}\\n\\n.view_lexicon .sense[data-level=\\\"0\\\"]:before {\\n  content: \\\"\\\";\\n}\\n\\n/* -----------------------------------------\\n     Read work\\n     ----------------------------------------- */\\n.verse.number {\\n  font-weight: bold;\\n  color: black;\\n  /*\\n  border: white solid 1px;\\n  padding: 1px 4px 1px 4px;\\n  background-color: white;\\n  */\\n}\\n\\n.verse-container {\\n  display: inline;\\n  line-height: 25px;\\n}\\n\\n.block {\\n  display: block;\\n  margin-top: 12px;\\n}\\n\\n.no_definition_entries {\\n  font-style: italic;\\n}\\n\\n.verse .word {\\n  cursor: pointer;\\n  cursor: hand;\\n}\\n.verse .word:hover {\\n  text-decoration: underline;\\n}\\n\\n.view_lexicon .tr {\\n  font-style: italic;\\n  font-weight: bold;\\n}\\n\\n@media print {\\n  .view_lexicon .note-tag {\\n    display: none;\\n  }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media print{.ui.top.menu{display:none}.underMenu{margin-top:0}}@media screen{.underMenu{margin-top:60px}}@media only screen{.ui.inverted.action.input.referenceJumpInput>input{width:130px}}@media only screen and (min-width: 767px){.ui.inverted.action.input.referenceJumpInput>input{width:180px}}.menu.control.inverted{background-color:#202023;border-bottom:1px solid #202023}.pushable.inverted>.pusher,.pushable.inverted>.pusher,.underMenu.inverted{background-color:#2B2B2E}.otherVersions>.menu>.item>.text{margin-right:64px}.bookProgress.ui.progress>.bar,.bookProgress.ui.progress{border-radius:0}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import React, { Component } from 'react';\nimport {\n  Button, Header, Modal, Table,\n} from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\n\nclass AboutDialog extends Component {\n  static getInfoRow(title, description) {\n    return (\n      <Table.Row>\n        <Table.Cell>\n          <strong>{title}</strong>\n        </Table.Cell>\n        <Table.Cell>{description}</Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  static getInfoLinkRow(title, link, linkName, prefix = '') {\n    return (\n      <Table.Row>\n        <Table.Cell>\n          <strong>{title}</strong>\n        </Table.Cell>\n        <Table.Cell>\n          {prefix}\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href={link}>\n            {linkName}\n          </a>\n        </Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  render() {\n    const { onClose } = this.props;\n    return (\n      <Modal defaultOpen onClose={onClose} closeIcon>\n        <Header icon=\"info\" content=\"About TextCritical.net\" />\n        <Modal.Content>\n          <p>\n            TextCritical.net is a website that provides ancient Greek texts and\n            useful analysis tools.\n          </p>\n          <Table basic=\"very\" celled collapsing>\n            <Table.Body>\n              {AboutDialog.getInfoRow('Version', '4.0')}\n              {AboutDialog.getInfoLinkRow(\n                'Sources of the works',\n                'https://lukemurphey.net/projects/ancient-text-reader/wiki/Content_Sources',\n                'LukeMurphey.net',\n                'Available at ',\n              )}\n              {AboutDialog.getInfoLinkRow(\n                'Source Code',\n                'https://github.com/LukeMurphey/textcritical_net',\n                'Github.com',\n                'Available at ',\n              )}\n              {AboutDialog.getInfoLinkRow(\n                'Components used',\n                'https://lukemurphey.net/projects/ancient-text-reader/wiki/Dependencies',\n                'LukeMurphey.net',\n                'Available at ',\n              )}\n            </Table.Body>\n          </Table>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={onClose}>Close</Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default AboutDialog;\n","import React from 'react';\nimport { Segment, Icon, Portal } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport './PopupDialog.scss';\n\n/**\n * Determines a recommendation about where to show a popup.\n *\n * @param {object} event The event from the handler with the dimensions\n */\nexport const getPositionRecommendation = (event) => {\n  const positionRight = event.clientX < (window.innerWidth / 2);\n  const positionBelow = event.clientY < (window.innerHeight / 2);\n\n  return [positionRight, positionBelow];\n};\n\nconst PopupDialog = (props) => {\n  const {\n    children, onClose, x, y, positionBelow, positionRight, footer, inverted,\n  } = props;\n\n  /**\n   * This is done to get rid of the outline around the close button and get it to show up at the\n   * right of the screen.\n   */\n  const closeButtonStyle = {\n    float: 'right',\n    cursor: 'pointer',\n    marginRight: 0,\n  };\n\n  // Correct for the cases where the dialog is off of the bottom of the screen.\n  const segmentStyle = {\n    position: 'absolute',\n    width: 500,\n    maxHeight: 300,\n    overflowY: 'auto',\n    padding: 0,\n    zIndex: 103,\n  };\n\n  const segmentStyleTinyTop = {\n    ...segmentStyle,\n    ...{\n      top: 45,\n      left: 5,\n      width: 'calc(100% - 10px)',\n      position: 'fixed',\n    },\n  };\n\n  const segmentStyleTinyBelow = {\n    ...segmentStyle,\n    ...{\n      bottom: 5,\n      left: 5,\n      width: 'calc(100% - 10px)',\n      position: 'fixed',\n    },\n  };\n\n  // Determine if we ought to enter the mode for mobile devices\n  const isSmallMode = () => window.innerWidth < 1024;\n\n  // Get the style appropriate for the segment to appear\n  const getSegmentStyle = () => {\n    if (isSmallMode()) {\n      if (positionBelow) {\n        return segmentStyleTinyBelow;\n      }\n      return segmentStyleTinyTop;\n    }\n\n    return segmentStyle;\n  };\n\n  // This applies to the footer\n  const footerStyle = {\n    position: 'sticky',\n    bottom: 0,\n    width: '100%',\n  };\n\n  // Get the main content for the popuo\n  const getContent = () => (\n    <Segment className=\"popupDialog\" inverted={inverted} style={getSegmentStyle()}>\n      <div style={{ padding: 15 }}>\n        <Icon style={closeButtonStyle} onClick={onClose}>&#10005;</Icon>\n        {children}\n      </div>\n      {footer && (\n        <Segment className=\"popupDialogFooter\" inverted={inverted} basic style={footerStyle}>{footer}</Segment>\n      )}\n    </Segment>\n  );\n\n  // Determine the height of the dialog\n  const height = segmentStyle.height ? segmentStyle.height : 200;\n\n  // Calculate the vertical position\n  if (positionBelow) {\n    segmentStyle.top = y;\n  } else {\n    segmentStyle.top = y - height - 20;\n  }\n\n  // Calculate the horizontal position\n  if (positionRight) {\n    segmentStyle.left = x;\n  } else {\n    segmentStyle.left = x - segmentStyle.width - 10;\n  }\n\n  // If we are running in small mode, run it as a portal so that it can appear in a fixed location\n  if (isSmallMode()) {\n    return (\n      <Portal open>\n        {getContent()}\n      </Portal>\n    );\n  }\n\n  // Otherwise, run it inline so that it is fixed in the rest of the content\n  return getContent();\n};\n\nPopupDialog.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  positionBelow: PropTypes.bool,\n  positionRight: PropTypes.bool,\n  children: PropTypes.element.isRequired,\n  footer: PropTypes.element,\n  inverted: PropTypes.bool,\n};\n\nPopupDialog.defaultProps = {\n  positionBelow: true,\n  positionRight: true,\n  footer: null,\n  inverted: false,\n};\n\nexport default PopupDialog;\n","import React, { createRef, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport parse, { domToReact } from 'html-react-parser';\nimport { getPositionRecommendation } from '../PopupDialog';\nimport './Chapter.scss';\n\n/**\n * This class renders the content of chapter of a work.\n *\n * render() is going to parse some HTML it gets from the server and then present it.\n * The reason is that the works are persisted in a preformatted state in order to improve\n * performance. The alternative is to parse the XML on the client-side and process it into\n * HTML. This would mean that the content could not be cached. Right now, the server preprocesses\n * the content into HTML chunks and then caches so that it can be loaded quickly.\n */\nclass Chapter extends Component {\n  constructor(props) {\n    super(props);\n\n    // We need to track the event listener with the bind call so that it can be removed\n    // See https://dev.to/em4nl/function-identity-in-javascript-or-how-to-remove-event-listeners-properly-1ll3\n    this.clickListener = null;\n\n    // We need to track when a verse was selected for highlight\n    this.highlightOverridden = false;\n  }\n\n  /**\n   * Wire up handlers for the clicking of the words and verses.\n   */\n  componentDidMount() {\n    this.clickListener = (event) => this.handleClick(event);\n    this.addHandler(this.clickListener);\n  }\n\n  /**\n   * Un wire the handlers to save memory.\n   */\n  componentWillUnmount() {\n    this.removeHandler(this.clickListener);\n  }\n\n  /**\n   * Get the text for the node separated into lines.\n   *\n   * @param {object} element The element to get the text from\n   */\n  getText(element) {\n    try {\n      const children = [];\n\n      // If the node is text, then add the line\n      if (element.nodeType === 3) {\n        if (element.textContent && element.textContent.length > 0) {\n          children.push(element.textContent);\n        }\n      }\n\n      // Accumulate the children entries\n      const childEntries = Array.from(element.childNodes).reduce(\n        (accum, child) => accum.concat(...this.getText(child)),\n        [],\n      );\n\n      children.push(...childEntries);\n\n      // Return the content\n      if (children) {\n        return children;\n      }\n    } catch (err) {\n      // If an exception happens, then just use the text content\n      return [element.textContent];\n    }\n\n    return [element.textContent];\n  }\n\n  /**\n   * Get the chapter content\n   * @param {string} className The class name to put the content under\n   */\n  getChapterContent(className) {\n    const { content, highlightedVerse } = this.props;\n\n    // These options will process the nodes such that the node gets a tag indicating that it is\n    // highlighted\n    const options = {\n      replace: ({ attribs, children }) => {\n        if (!attribs) return undefined;\n\n        if (attribs && attribs['data-verse'] === highlightedVerse) {\n          return (\n            <a\n              className=\"verse-link highlighted\"\n              href={attribs.href}\n              data-verse={attribs['data-verse']}\n              data-verse-descriptor={attribs['data-verse-descriptor']}\n              id={attribs.id}\n            >\n              {domToReact(children, options)}\n            </a>\n          );\n        }\n\n        return undefined;\n      },\n    };\n\n    const reactElement = parse(content, options);\n\n    return (\n      <div\n        className={className}\n        ref={this.wrapper}\n      >\n        {reactElement}\n      </div>\n    );\n  }\n\n  addHandler(handler, type = 'click') {\n    if (this.wrapper.current) {\n      this.wrapper.current.addEventListener(type, (event) => handler(event));\n    }\n  }\n\n  removeHandler(handler, type = 'click') {\n    if (this.wrapper.current) {\n      this.wrapper.current.removeEventListener(type, (event) => handler(event));\n    }\n  }\n\n  /**\n   * Handle the clicking of a word.\n   *\n   * @param {*} event The event object\n   */\n  handleClickWord(event) {\n    const word = event.target.textContent;\n    const { onWordClick } = this.props;\n\n    const [positionRight, positionBelow] = getPositionRecommendation(event);\n\n    onWordClick(word, event.layerX, event.layerY, positionRight, positionBelow);\n  }\n\n  /**\n   * Unhighlight existing verses.\n   */\n  unhighlistVerses() {\n    if (this.wrapper && this.wrapper.current) {\n      const highlights = Array.from(this.wrapper.current.getElementsByClassName('highlighted'));\n      highlights.map((highlight) => highlight.classList.remove('highlighted'));\n    }\n  }\n\n  /**\n   * Highlight the verse.\n   * @param {string} verse The ID of the verse.\n   */\n  highlightVerse(verse) {\n    if (this.wrapper && this.wrapper.current) {\n      const verses = Array.from(this.wrapper.current.getElementsByClassName('verse-link'));\n\n      // Find the element with the verse\n      const target = verses.find((element) => {\n        if (element.attributes['data-verse'] && element.attributes['data-verse'].nodeValue === verse) {\n          return true;\n        }\n        return false;\n      });\n\n      // Mark it if we found it\n      if (target) {\n        target.parentElement.classList.toggle('highlighted');\n      }\n    } else {\n      setTimeout(() => this.highlightVerse(verse), 100);\n    }\n  }\n\n  /**\n   * Handle the clicking of a verse.\n   *\n   * @param {*} event The event object\n   */\n  handleClickVerse(event) {\n    // Don't follow the link\n    event.preventDefault();\n\n    // Get the target containing the verse info\n    const target = event.target.parentElement;\n\n    // Get the descriptor of the verse\n    const verseDescriptorElem = Array.from(target.attributes).find((element) => element.name === 'data-verse-descriptor');\n    const verseDescriptor = verseDescriptorElem ? verseDescriptorElem.nodeValue : null;\n\n    // Get the ID\n    const { id } = target;\n\n    // Get the the href\n    let href;\n\n    if (target.attributes.href) {\n      href = target.attributes.href.nodeValue;\n    } else {\n      href = null;\n    }\n\n    // Get the verse number\n    const verseElem = Array.from(target.attributes).find((element) => element.name === 'data-verse');\n    const verse = verseElem ? verseElem.nodeValue : null;\n\n    // Stop if we didn't get what we needed to continue\n    if (!verseDescriptor) {\n      return;\n    }\n\n    this.highlightOverridden = true;\n\n    // Fire off the handler\n    const { onVerseClick } = this.props;\n    onVerseClick(verseDescriptor, verse, id, href, event.x, event.y);\n\n    // Unhighlight existing verses\n    // this.unhighlistVerses();\n\n    // Highlight the verse\n    // target.parentElement.classList.toggle('highlighted');\n  }\n\n  /**\n   * handle the clicking of a note.\n   */\n  handleClickNote(event) {\n    // Get the ID\n    const { id } = event.target;\n\n    // Get the contents for the given ID\n    const contentsElem = document.getElementById(`content_for_${id}`);\n    let contents = ['Note content could not be found'];\n\n    if (contentsElem) {\n      contents = [contentsElem.textContent];\n    }\n\n    const [positionRight, positionBelow] = getPositionRecommendation(event);\n\n    // Fire off the handler\n    const { onNoteClick } = this.props;\n    onNoteClick(contents, id, event.layerX, event.layerY, positionRight, positionBelow);\n  }\n\n  handleClickEmpty() {\n    const { onClickAway } = this.props;\n    onClickAway();\n  }\n\n  handleClick(event) {\n    // Determine if we are clicking a word, verse, note, or just empty space\n    if (event.target.className.includes('word')) {\n      this.handleClickWord(event);\n    } else if (event.target.className.includes('verse')) {\n      this.handleClickVerse(event);\n      this.handleClickEmpty();\n    } else if (event.target.className.includes('note-tag')) {\n      this.handleClickNote(event);\n    } else {\n      this.handleClickEmpty();\n    }\n  }\n\n  render() {\n    const { inverted } = this.props;\n\n    // Determine the class name\n    let className = 'view_read_work';\n\n    if (inverted) {\n      className = 'view_read_work inverted';\n    }\n\n    // We are keeping a reference to the wrapper so that math can be done regarding client rectangle\n    // See https://medium.com/trabe/getting-rid-of-finddomnode-method-in-your-react-application-a0d7093b2660\n    this.wrapper = createRef();\n    return (\n      <>\n        {this.getChapterContent(className)}\n      </>\n    );\n  }\n}\n\nChapter.propTypes = {\n  content: PropTypes.string.isRequired,\n  highlightedVerse: PropTypes.string,\n  onVerseClick: PropTypes.func,\n  onWordClick: PropTypes.func,\n  onClickAway: PropTypes.func,\n  onNoteClick: PropTypes.func,\n  inverted: PropTypes.bool,\n};\n\nChapter.defaultProps = {\n  highlightedVerse: null,\n  onVerseClick: () => { },\n  onWordClick: () => { },\n  onClickAway: () => { },\n  onNoteClick: () => { },\n  inverted: false,\n};\n\nexport default Chapter;\n","import React, { Component } from 'react';\nimport {\n  Button, Header, Modal, Table, Placeholder, Image,\n} from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport { ENDPOINT_WORK_INFO, ENDPOINT_WORK_IMAGE } from '../Endpoints';\nimport ErrorMessage from '../ErrorMessage';\n\nclass AboutWorkDialog extends Component {\n  static getInfoRow(title, description) {\n    return (\n      <Table.Row>\n        <Table.Cell>\n          <strong>{title}</strong>\n        </Table.Cell>\n        <Table.Cell>{description}</Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n    const { work } = this.props;\n    this.loadInfo(work);\n  }\n\n  loadInfo(work) {\n    fetch(ENDPOINT_WORK_INFO(work))\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState({ data });\n      })\n      .catch((e) => {\n        this.setState({\n          error: e.toString(),\n        });\n      });\n  }\n\n  render() {\n    const { onClose, work } = this.props;\n    const { data, error } = this.state;\n\n    return (\n      <Modal size=\"small\" defaultOpen onClose={onClose} closeIcon>\n        {!data && (\n          <Header icon=\"info\" content=\"About this Book\" />\n        )}\n        {data && (\n          <Header icon=\"info\" content={`About ${data.title}`} />\n        )}\n        <Modal.Content scrolling>\n          {error && (\n            <ErrorMessage\n              title=\"Unable to load work information\"\n              description=\"Unable to get information about the work from the server\"\n              message={error}\n            />\n          )}\n          {!error && data && (\n            <>\n              <div style={{ display: 'inline-block', marginRight: 16 }}>\n                <Image src={ENDPOINT_WORK_IMAGE(work)} />\n              </div>\n              <div style={{ display: 'inline-block' }}>\n                <Table basic=\"very\" celled collapsing>\n                  <Table.Body>\n                    {AboutWorkDialog.getInfoRow('Title', data.title)}\n                    {AboutWorkDialog.getInfoRow('Language', data.language)}\n                    {AboutWorkDialog.getInfoRow('Source', data.source)}\n                  </Table.Body>\n                </Table>\n              </div>\n              <div style={{ marginTop: 16 }}>\n                {data.source_description && (\n                  data.source_description\n                )}\n              </div>\n              {data.wiki_info && (\n                <div style={{ marginTop: 16 }}>\n                  {data.wiki_info.summary}\n                </div>\n              )}\n            </>\n          )}\n          {!error && !data && (\n            <Placeholder>\n              <Placeholder.Header image>\n                <Placeholder.Line />\n                <Placeholder.Line />\n              </Placeholder.Header>\n              <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n              </Placeholder.Paragraph>\n            </Placeholder>\n          )}\n        </Modal.Content>\n        <Modal.Actions>\n          {data && data.wiki_info && (\n            <a target=\"_blank\" style={{ marginTop: 10, float: 'left' }} rel=\"noopener noreferrer\" href={data.wiki_info.url}>View on wikipedia</a>\n          )}\n          <Button onClick={onClose}>Close</Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nAboutWorkDialog.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  work: PropTypes.string.isRequired,\n};\n\nexport default AboutWorkDialog;\n","import React, { Component } from 'react';\nimport {\n  Button, Header, Modal, Radio, Form,\n} from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport { ENDPOINT_WORK_DOWNLOAD } from '../Endpoints';\n\nconst MOBI_FORMAT = 'mobi';\nconst EPUB_FORMAT = 'epub';\n\nclass WorkDownloadDialog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      format: EPUB_FORMAT,\n    };\n  }\n\n  handleChange(event, data) {\n    this.setState({\n      format: data.value,\n    });\n  }\n\n  download() {\n    const { format } = this.state;\n    const { work } = this.props;\n    document.location = ENDPOINT_WORK_DOWNLOAD(work, format);\n  }\n\n  render() {\n    const { onClose } = this.props;\n    const { format } = this.state;\n\n    return (\n      <Modal size=\"tiny\" defaultOpen onClose={onClose} closeIcon>\n        <Header icon=\"info\" content=\"Download Book\" />\n        <Modal.Content>\n          <div stryle={{ marginBottom: 12 }}>Select which format you would like to download:</div>\n          <Form>\n            <Form.Field>\n              <Radio\n                label=\"ePUB Format (Recommended)\"\n                name=\"radioGroup\"\n                value={EPUB_FORMAT}\n                checked={format === EPUB_FORMAT}\n                onChange={(e, d) => this.handleChange(e, d)}\n              />\n            </Form.Field>\n            <Form.Field>\n              <Radio\n                label=\"MOBI Format (Amazon Kindle)\"\n                name=\"radioGroup\"\n                value={MOBI_FORMAT}\n                checked={format === MOBI_FORMAT}\n                onChange={(e, d) => this.handleChange(e, d)}\n              />\n            </Form.Field>\n          </Form>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button onClick={onClose}>Close</Button>\n          <Button primary onClick={() => this.download()}>Download</Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n}\n\nWorkDownloadDialog.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  work: PropTypes.string.isRequired,\n};\n\nexport default WorkDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Message, Icon } from 'semantic-ui-react';\nimport './WordLemma.css';\n\nconst WordLemma = (props) => {\n  const {\n    lexiconEntries, inverted,\n  } = props;\n\n  let className = '';\n\n  if (inverted) {\n    className = 'inverted';\n  }\n\n  return (\n    <>\n      {lexiconEntries.length === 0 && (\n        <Message warning className={className}>\n          <Icon name=\"warning\" />\n          No definition available from Liddel and Scott.\n        </Message>\n      )}\n      {lexiconEntries && (\n        lexiconEntries.map((lexiconEntry) => (\n          <div\n            key={lexiconEntry.lemma_lexical_form}\n            className=\"view_lexicon\"\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: lexiconEntry.definition }}\n          />\n        ))\n      )}\n    </>\n  );\n};\n\nWordLemma.propTypes = {\n  lexiconEntries: PropTypes.arrayOf(PropTypes.shape),\n  inverted: PropTypes.bool,\n};\n\nWordLemma.defaultProps = {\n  lexiconEntries: null,\n  inverted: false,\n};\n\nexport default WordLemma;\n","import React, { Component } from 'react';\nimport { Placeholder, Accordion, Icon } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { ENDPOINT_WORD_PARSE } from '../Endpoints';\nimport { SEARCH } from '../URLs';\nimport ErrorMessage from '../ErrorMessage';\nimport WordLemma from './WordLemma';\n\nconst MODE_LOADING = 0;\nconst MODE_ERROR = 1;\nconst MODE_DONE = 2;\n\nclass WordInformation extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      wordInfo: null,\n      error: null,\n      activeIndex: null,\n    };\n  }\n\n  static getSearchLinks(word, work) {\n    if (work) {\n      return (\n        <>\n          Search for\n          {' '}\n          {word}\n          {' '}\n          in\n          {' '}\n          <Link to={SEARCH(`work:${work} ${word}`)}>this work</Link>\n          {' '}\n          or\n          {' '}\n          <Link to={SEARCH(word)}>all works</Link>\n        </>\n      );\n    }\n    return (\n      <>\n        Search for\n        {' '}\n        <Link to={SEARCH(word)}>{word}</Link>\n      </>\n    );\n  }\n\n  componentDidMount() {\n    const { word } = this.props;\n    this.getWordInfo(word);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { word } = this.props;\n    if (word !== prevProps.word) {\n      this.getWordInfo(word);\n    }\n  }\n\n  /**\n   * Get information for the given word.\n   *\n   * @param {string} word The word to get information on\n   */\n  getWordInfo(word) {\n    this.setState({ loading: true });\n\n    fetch(ENDPOINT_WORD_PARSE(word))\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState({\n          wordInfo: data,\n          loading: false,\n          error: null,\n          activeIndex: null,\n        });\n      })\n      .catch((e) => {\n        this.setState({\n          error: e.toString(),\n          loading: false,\n        });\n      });\n  }\n\n  handleClick(e, titleProps) {\n    const { index } = titleProps;\n    const { activeIndex } = this.state;\n    const newIndex = activeIndex === index ? -1 : index;\n\n    this.setState({ activeIndex: newIndex });\n  }\n\n  render() {\n    const { word, inverted, work } = this.props;\n    const {\n      wordInfo, loading, error, activeIndex,\n    } = this.state;\n\n    let mode = MODE_LOADING;\n    if (!loading && wordInfo) {\n      mode = MODE_DONE;\n    }\n    else if (!loading && error) {\n      mode = MODE_ERROR;\n    }\n\n    return (\n      <>\n        {mode === MODE_DONE && (\n          <div>\n            Found\n            {' '}\n            {wordInfo.length}\n            {' '}\n            {wordInfo.length !== 1 && (\n              <>parses for</>\n            )}\n            {wordInfo.length === 1 && (\n              <>parse for</>\n            )}\n            {' '}\n            {word}\n            .\n            {wordInfo && wordInfo.length > 0 && wordInfo[0].ignoring_diacritics && (\n              <>\n                {' '}\n                An exact match could not be found, so similar words with different diacritical marks\n                are being returned.\n              </>\n            )}\n            <Accordion inverted={inverted} style={{ marginTop: 18 }} fluid>\n              {wordInfo.map((entry, index) => (\n                <React.Fragment key={`${entry.form}::${entry.description}`}>\n                  <Accordion.Title\n                    active={activeIndex === index}\n                    index={index}\n                    onClick={(e, titleProps) => this.handleClick(e, titleProps)}\n                  >\n                    <Icon name=\"dropdown\" />\n                    {entry.lemma}\n                    {' '}\n                    (\n                    {entry.description}\n                    ):\n                    {' '}\n                    {entry.meaning}\n                  </Accordion.Title>\n                  <Accordion.Content\n                    active={activeIndex === index}\n                  >\n                    <WordLemma\n                      lexiconEntries={entry.lexicon_entries}\n                      inverted={inverted}\n                    />\n                  </Accordion.Content>\n                </React.Fragment>\n              ))}\n            </Accordion>\n            <div style={{ marginTop: 12 }}>\n              {WordInformation.getSearchLinks(word, work)}\n            </div>\n          </div>\n        )}\n        {mode === MODE_ERROR && (\n          <div>\n            <ErrorMessage\n              inverted={inverted}\n              title=\"Unable to get word information\"\n              description=\"Information for the given word could not be obtained.\"\n              message={error}\n            />\n          </div>\n        )}\n        {mode === MODE_LOADING && (\n          <Placeholder inverted={inverted} style={{ marginTop: 32 }}>\n            <Placeholder.Header>\n              <Placeholder.Line />\n            </Placeholder.Header>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n          </Placeholder>\n        )}\n      </>\n    );\n  }\n}\n\nWordInformation.propTypes = {\n  word: PropTypes.string.isRequired,\n  work: PropTypes.string,\n  inverted: PropTypes.bool,\n};\n\nWordInformation.defaultProps = {\n  inverted: false,\n  work: null,\n};\n\nexport default WordInformation;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { GOOGLE_SEARCH, PERSEUS_WORD_LOOKUP, LOGEION_WORD_LOOKUP } from '../URLs';\n\nfunction ExternalLookupLinks({ word }) {\n  return (\n    <div>\n      Look up at\n      {' '}\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={PERSEUS_WORD_LOOKUP(word)}>\n        Perseus\n      </a>\n      ,\n      {' '}\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={LOGEION_WORD_LOOKUP(word)}>\n        Logeion\n      </a>\n      , or\n      {' '}\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={GOOGLE_SEARCH(word)}>\n        Google\n      </a>\n    </div>\n  );\n}\n\nExternalLookupLinks.propTypes = {\n  word: PropTypes.string.isRequired,\n};\n\nexport default ExternalLookupLinks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport WordInformation from '.';\nimport PopupDialog from '../PopupDialog';\nimport ExternalLookupLinks from './ExternalLookupLinks';\n\nconst WordInformationDialog = (props) => {\n  const {\n    word, onClose, x, y, positionBelow, positionRight, inverted, work,\n  } = props;\n\n  return (\n    <PopupDialog\n      onClose={onClose}\n      inverted={inverted}\n      x={x}\n      y={y}\n      positionBelow={positionBelow}\n      positionRight={positionRight}\n      footer={<ExternalLookupLinks word={word} />}\n    >\n      <WordInformation work={work} word={word} inverted={inverted} />\n    </PopupDialog>\n  );\n};\n\nWordInformationDialog.propTypes = {\n  word: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  positionBelow: PropTypes.bool,\n  positionRight: PropTypes.bool,\n  inverted: PropTypes.bool,\n  work: PropTypes.string,\n};\n\nWordInformationDialog.defaultProps = {\n  positionBelow: true,\n  positionRight: true,\n  inverted: true,\n  work: null,\n};\n\nexport default WordInformationDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopupDialog from '../PopupDialog';\n\nconst FootnoteDialog = (props) => {\n  const {\n    notes, onClose, x, y, positionBelow, positionRight, inverted,\n  } = props;\n\n  return (\n    <PopupDialog\n      onClose={onClose}\n      inverted={inverted}\n      x={x}\n      y={y}\n      positionBelow={positionBelow}\n      positionRight={positionRight}\n    >\n      <div>\n        {notes.map((note, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <div key={index}>{note}</div>\n        ))}\n      </div>\n    </PopupDialog>\n  );\n};\n\nFootnoteDialog.propTypes = {\n  notes: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onClose: PropTypes.func.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  positionBelow: PropTypes.bool,\n  positionRight: PropTypes.bool,\n  inverted: PropTypes.bool,\n};\n\nFootnoteDialog.defaultProps = {\n  positionBelow: true,\n  positionRight: true,\n  inverted: false,\n};\n\nexport default FootnoteDialog;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Visibility, Image, Loader } from 'semantic-ui-react';\n\nclass LazyImage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false,\n    };\n  }\n\n  showImage() {\n    this.setState({\n      show: true,\n    });\n  }\n\n  render() {\n    const { show } = this.state;\n    const {\n      size, children, src, style,\n    } = this.props;\n\n    if (!show) {\n      return (\n        <Visibility as=\"span\" onOnScreen={() => this.showImage()}>\n          {children && children}\n          {!children && <Loader data-testid=\"loader\" active inline=\"centered\" size={size} />}\n        </Visibility>\n      );\n    }\n    return <Image style={style} src={src} />;\n  }\n}\n\nLazyImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  children: PropTypes.element,\n  // eslint-disable-next-line react/forbid-prop-types\n  style: PropTypes.object,\n};\n\nLazyImage.defaultProps = {\n  size: 'tiny',\n  children: null,\n  style: {},\n};\n\nexport default LazyImage;\n","import React, { Component } from 'react';\nimport {\n  Table, Placeholder, Image, Input, Label,\n} from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\n// regeneratorRuntime is needed for AwesomeDebouncePromise\n// eslint-disable-next-line no-unused-vars\nimport regeneratorRuntime from 'regenerator-runtime';\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\nimport { ENDPOINT_WORKS_LISTS, ENDPOINT_WORK_IMAGE } from '../Endpoints';\nimport LazyImage from '../LazyImage';\nimport ErrorMessage from '../ErrorMessage';\n\nconst ClickStyle = {\n  cursor: 'pointer',\n};\n\nclass BookSelection extends Component {\n  static workMatchesSearch(work, search) {\n    return work.title.toLowerCase().includes(search)\n    || work.title_slug.toLowerCase().includes(search)\n    || work.author.toLowerCase().includes(search)\n    || work.editor.toLowerCase().includes(search)\n    || work.language.toLowerCase().includes(search);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      works: null,\n      error: null,\n      search: '',\n    };\n  }\n\n  componentDidMount() {\n    this.loadInfo();\n  }\n\n  onSearchChange(data) {\n    this.setState({\n      search: data.value,\n    });\n  }\n\n  getWorkRow(work, lazyLoad = true, onLargeScreen = true) {\n    const { onSelectWork, loadedWork } = this.props;\n    const handler = () => { onSelectWork(work.title_slug); };\n    const isRelated = this.isRelatedWork(work);\n    const isSameAuthor = this.isSameAuthor(work);\n    const isLoadedWork = (loadedWork && loadedWork === work.title_slug);\n\n    return (\n      <Table.Row key={work.title_slug}>\n        { onLargeScreen && (\n          <Table.Cell className=\"workImage\" style={ClickStyle} onClick={handler}>\n            { lazyLoad && (\n              <LazyImage style={{ width: 32 }} src={ENDPOINT_WORK_IMAGE(work.title_slug, 64)}>\n                <Image style={{ width: 32 }} src=\"/book-cover-small.png\" />\n              </LazyImage>\n            )}\n            { !lazyLoad && (\n              <Image style={{ width: 32 }} src={ENDPOINT_WORK_IMAGE(work.title_slug, 64)} />\n            )}\n          </Table.Cell>\n        )}\n        <Table.Cell style={ClickStyle} onClick={handler}>\n          <div>\n            {work.title}\n            <div style={{ display: 'inline-block', float: 'right', paddingRight: 4 }}>\n              {isRelated && onLargeScreen && (\n                <Label as=\"a\" color=\"red\">Related Work</Label>\n              )}\n              {isSameAuthor && !isLoadedWork && onLargeScreen && (\n                <Label as=\"a\" color=\"blue\">Same Author</Label>\n              )}\n              {isLoadedWork && onLargeScreen && (\n                <Label as=\"a\" color=\"green\">This work</Label>\n              )}\n              {isRelated && !onLargeScreen && (\n                <Label as=\"a\" color=\"red\" circular empty />\n              )}\n              {isSameAuthor && !isLoadedWork && !onLargeScreen && (\n                <Label as=\"a\" color=\"blue\" circular empty />\n              )}\n            </div>\n          </div>\n          <div style={{ color: '#888' }}>\n            {work.language}\n            {work.author && ` by ${work.author}`}\n            {work.editor && ` (${work.editor})`}\n          </div>\n        </Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  /**\n   * Determine if the work is a related work.\n   *\n   * @param {object} work The work to see if it is a related work\n   */\n  isRelatedWork(work) {\n    const { relatedWorks } = this.props;\n\n    const found = relatedWorks.find((relatedWork) => relatedWork.title_slug === work.title_slug);\n    if (found) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Determine if the work is by the same author\n   *\n   * @param {object} work The work to see if it is a related work\n   */\n  isSameAuthor(work) {\n    const { authors } = this.props;\n\n    if (!authors || !work.author) {\n      return false;\n    }\n\n    const found = authors.find((author) => author.name === work.author);\n\n    if (found) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Sort the list of works.\n   *\n   * @param {array} works The works to sort\n   */\n  sortWorks(works) {\n    works.sort((a, b) => {\n      if (this.isRelatedWork(a) && !this.isRelatedWork(b)) {\n        return -1;\n      }\n      if (this.isRelatedWork(b) && !this.isRelatedWork(a)) {\n        return 1;\n      }\n      return a.title > b.title;\n    });\n\n    return works;\n  }\n\n  loadInfo() {\n    fetch(ENDPOINT_WORKS_LISTS())\n      .then((res) => res.json())\n      .then((works) => {\n        this.setState({ works: this.sortWorks(works) });\n      })\n      .catch((e) => {\n        this.setState({\n          error: e.toString(),\n        });\n      });\n  }\n\n  render() {\n    const { works, error, search } = this.state;\n    const searchLowerCase = search.toLowerCase();\n\n    const onChange = (event, data) => { this.onSearchChange(data); };\n    const onChangeDebounced = AwesomeDebouncePromise(onChange, 500);\n\n    const onLargeScreen = window.innerWidth > 767;\n\n    // Change the width on small screens\n    const width = onLargeScreen ? 500 : 250;\n\n    return (\n      <>\n        {!error && works && (\n        <div>\n          <Input onChange={onChangeDebounced} style={{ width: '100%' }} placeholder=\"Search...\" />\n        </div>\n        )}\n        <div style={{ maxHeight: 400, width, overflowY: 'auto' }}>\n          {error && (\n          <ErrorMessage\n            title=\"Unable to load the list of works\"\n            description=\"Unable to get the list of works from the server\"\n            message={error}\n          />\n          )}\n          {!error && works && (\n          <Table basic=\"very\" celled collapsing>\n            <Table.Body>\n              {works\n                .filter((work) => BookSelection.workMatchesSearch(work, searchLowerCase))\n                .map((work, index) => (\n                  this.getWorkRow(work, index > 15, onLargeScreen)\n                ))}\n            </Table.Body>\n          </Table>\n          )}\n          {!error && !works && (\n          <Placeholder>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n          </Placeholder>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n\nBookSelection.propTypes = {\n  onSelectWork: PropTypes.func.isRequired,\n  relatedWorks: PropTypes.arrayOf(PropTypes.shape),\n  authors: PropTypes.arrayOf(PropTypes.string),\n  loadedWork: PropTypes.string,\n};\n\nBookSelection.defaultProps = {\n  relatedWorks: [],\n  authors: [],\n  loadedWork: null,\n};\n\nexport default BookSelection;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Message, Button } from 'semantic-ui-react';\n\nconst NoWorkSelected = ({ inverted, onClick }) => (\n  <Message info className={inverted ? 'inverted' : ''}>\n    <Message.Header>No Book Selected</Message.Header>\n    <p>\n      Choose a book above to begin reading.\n    </p>\n    {onClick && (\n      <p>\n        <Button onClick={() => onClick()} inverted={inverted}>Open Library</Button>\n      </p>\n    )}\n  </Message>\n);\n\nNoWorkSelected.propTypes = {\n  onClick: PropTypes.func,\n  inverted: PropTypes.bool,\n};\n\nNoWorkSelected.defaultProps = {\n  inverted: false,\n  onClick: null,\n};\n\nexport default NoWorkSelected;\n","export default __webpack_public_path__ + \"images/5a0a1a6aa2a65b08197971f38a43cf6c-Library.svg\";","import React, { Component } from 'react';\nimport {\n  Button, Input, Icon, Dropdown, Container, Header, Grid, Placeholder, Segment,\n  Message, Menu, Popup, Sidebar, Image, Progress, Responsive,\n} from 'semantic-ui-react';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\nimport { ENDPOINT_READ_WORK, ENDPOINT_RESOLVE_REFERENCE, ENDPOINT_WORK_IMAGE } from '../Endpoints';\nimport { SEARCH, READ_WORK } from '../URLs';\nimport { toTitleCase } from '../Utils';\nimport Chapter from './Chapter';\nimport ErrorMessage from '../ErrorMessage';\nimport AboutWorkDialog from '../AboutWorkDialog';\nimport AboutDialog from '../AboutDialog';\nimport WorkDownloadDialog from '../WorkDownloadDialog';\nimport WordInformation from '../WordInformation/WordInformationPopup';\nimport FootnotePopup from '../FootnotePopup';\nimport BookSelection from '../BookSelection';\nimport NoWorkSelected from './NoWorkSelected';\nimport LibraryIcon from '../Icons/Library.svg';\nimport './index.scss';\n\nconst MODE_LOADING = 0;\nconst MODE_ERROR = 1;\nconst MODE_DONE = 2;\nconst MODE_NOT_READY = 3;\n\nconst NextPageStyle = {\n  bottom: '20px',\n  right: '20px',\n  position: 'fixed',\n};\n\nconst PriorPageStyle = {\n  bottom: '20px',\n  left: '20px',\n  position: 'fixed',\n};\n\nconst ContainerStyle = {\n  paddingTop: 60,\n};\n\nconst SidebarStyle = {\n  height: '100vh',\n  marginTop: 0,\n};\n\nconst resolveReferenceDebounced = AwesomeDebouncePromise(\n  (titleSlug, reference) => fetch(ENDPOINT_RESOLVE_REFERENCE(titleSlug, reference)),\n  500,\n);\n\n/**\n * Defines how long a division name can get before it is considered long.\n */\nconst LONG_DIVISION_NAME = 30;\n\nclass Reader extends Component {\n  /**\n   * Determine if the divisions tend to have long names. This is useful for determining if we ought\n   * to use the titles or the shorter descriptors.\n   *\n   * @param {array} divisions The list of divisions.\n   */\n  static hasLongDivisionNames(divisions) {\n    const countLongNames = (accumulator, division) => (\n      division.full_title && division.full_title.length > LONG_DIVISION_NAME\n        ? accumulator + 1\n        : accumulator\n    );\n    const longNames = divisions.reduce(countLongNames, 0);\n\n    return (longNames > 5 || longNames === divisions.length);\n  }\n\n  /**\n   * Determine if the division descriptors appear to be names.\n   *\n   * @param {array} divisions The list of divisions.\n   */\n  static areDescriptorsNames(divisions) {\n    const countIndicators = (accumulator, division) => (\n      /^([0-9]+|[IVX]+|[A-Z])$/i.test(division.descriptor) ? accumulator + 1 : accumulator\n    );\n    const indicators = divisions.reduce(countIndicators, 0);\n    return (indicators !== divisions.length);\n  }\n\n  /**\n   * Get the the division descriptor.\n   *\n   * @param {array} division The list of divisions.\n   * @param {*} useTitles Whether titles ought to be used.\n   * @param {*} descriptorsAreNames Whether descriptors appear to be names.\n   */\n  static getDivisionText(division, useTitles, descriptorsAreNames) {\n    // Use the title (from the full_title of the division)\n    if (useTitles) {\n      return toTitleCase(division.label);\n    }\n    // Are the descriptors names (like \"Matthew\" insread of \"1\")\n    if (descriptorsAreNames) {\n      return division.descriptor;\n    }\n    return `${division.type} ${division.descriptor}`;\n  }\n\n  /**\n   * Convert the list of divisions to options that can be processed by the dropdown menu.\n   *\n   * @param {array} divisions The list of divisions.\n   */\n  static convertDivisionsToOptions(divisions) {\n    const useTitles = !Reader.hasLongDivisionNames(divisions);\n    const descriptorsAreNames = Reader.areDescriptorsNames(divisions);\n\n    return divisions.map((d) => ({\n      key: d.description,\n      text: Reader.getDivisionText(d, useTitles, descriptorsAreNames),\n      value: d.descriptor,\n    }));\n  }\n\n  /**\n   * This function looks for the chapter the user entered. It looks both in the description as well\n   * as the key.\n   * This is useful because the works often use a Greek name as the description but an English\n   * description too and we want both to be searchable (don't want users to have to type ).\n   * @param {array} options List of dropdown options\n   * @param {string} query The string that the user entered that we are searching for\n   */\n  static workSearch(options, query) {\n    const queryLower = query.toLowerCase();\n    return options.filter((opt) => (\n      opt.text.toLowerCase().includes(queryLower)\n      || opt.key.toLowerCase().includes(queryLower)\n    ));\n  }\n\n  /**\n   * Get a placeholder for the content.\n   */\n  static getPlaceholder(inverted = false) {\n    return (\n      <div style={{ paddingTop: 16 }}>\n        <Placeholder inverted={inverted}>\n          <Placeholder.Header>\n            <Placeholder.Line />\n          </Placeholder.Header>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n        </Placeholder>\n      </div>\n    );\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: null,\n      data: null,\n      errorTitle: null,\n      errorMessage: null,\n      errorDescription: null,\n      loading: false,\n      divisions: null,\n      loadedWork: null,\n      referenceValid: true,\n      referenceValue: '',\n      selectedWord: null,\n      popupX: null,\n      popupY: null,\n      redirectedFrom: null,\n      redirectedTo: null,\n      sidebarVisible: false,\n    };\n\n    // This will store the last reference set so that we make sure not to replace the reference\n    // we did a reference resolution check against the server for.\n    this.lastSetReference = null;\n\n    // Keep a list of the verses so that we can know what chapter the verse is assopciated with.\n    // This is needed so that we don't force a reload just to get the same chapter.\n    this.verseReferences = {};\n  }\n\n  componentDidMount() {\n    const {\n      defaultWork,\n      division0,\n      division1,\n      division2,\n      division3,\n      division4,\n      leftovers,\n    } = this.props;\n\n    const divisions = [\n      division0,\n      division1,\n      division2,\n      division3,\n      division4,\n      leftovers,\n    ].filter((entry) => entry);\n\n    if (defaultWork) {\n      this.loadChapter(defaultWork, ...divisions);\n    }\n  }\n\n  /**\n   * Handle a component update in order to load a new chapter if the user changed navigation\n   * based on the browsers back/forward buttons.\n   *\n   * @param {object} prevProps The previous properties\n   */\n  componentDidUpdate(prevProps) {\n    const { location, match } = this.props;\n    const {\n      redirectedTo, data, highlightedVerse, loadedWork,\n    } = this.state;\n\n    // See if we know that this is a reference to this chapter\n    const existingChapter = this.verseReferences[location.pathname];\n\n    // Check if the chapter we have loaded already\n    // This needs to check the loaded work too, since we need to recognize if we the reference is\n    // the same reference but in a different work.\n    if (data && data.chapter && existingChapter\n      && existingChapter.chapter === data.chapter.full_descriptor\n      && (loadedWork && loadedWork === match.params.work)\n    ) {\n      // Get the highlighted verse\n      const highlightedVerseRef = existingChapter.verse;\n\n      if (highlightedVerse !== highlightedVerseRef) {\n        this.setState({\n          highlightedVerse: highlightedVerseRef,\n          referenceValue: existingChapter.referenceValue,\n        });\n      }\n\n      // Don't load the new one, we already have it on the page\n      return;\n    }\n\n    // Determine if the page changed\n    if (location.pathname !== prevProps.location.pathname && redirectedTo !== location.pathname) {\n      const divisions = [\n        match.params.division0,\n        match.params.division1,\n        match.params.division2,\n        match.params.division3,\n        match.params.division4,\n        match.params.leftovers,\n      ].filter((entry) => entry);\n      this.loadChapter(match.params.work, ...divisions);\n    }\n  }\n\n  /**\n   * Handle the clicking of a verse.\n   *\n   * @param {string} verseDescriptor A descripion of the verse (e.g. \"John 8:4\")\n   * @param {string} verse The verse number (e.g. \"4\")\n   * @param {string} id An ID that designates the verse in the HTML DOM\n   * @param {string} href A href for the verse (e.g. \"/work/new-testament/John/8/4\")\n   * @param {int} x The x coordinate of the verse marker\n   * @param {int} y The y coordinate of the verse marker\n   */\n  onVerseClick(verseDescriptor, verse, id, href) {\n    const { data } = this.state;\n\n    // Add the verse to the list\n    this.addVerseToHistoryList(href, data.chapter.full_descriptor, verse, verseDescriptor);\n\n    this.setState({\n      referenceValue: verseDescriptor,\n      referenceValid: true,\n    });\n\n    const { history } = this.props;\n\n    history.push(href);\n  }\n\n  /**\n   * Handle the clicking of a word.\n   *\n   * @param {string} word The word to get information on\n   * @param {int} x The x coordinate designating where to show the popup\n   * @param {int} y The y coordinate designating where to show the popup\n   * @param {bool} positionRight Indicates it is best to show the popup to the right of the offset\n   * @param {bool} positionBelow Indicates it is best to show the popup below the offset\n   */\n  onWordClick(word, x, y, positionRight, positionBelow) {\n    this.setState({\n      selectedWord: word,\n      modal: 'word',\n      popupX: x,\n      popupY: y,\n      popupPositionRight: positionRight,\n      popupPositionBelow: positionBelow,\n    });\n  }\n\n  /**\n   * Handle the clicking of a note.\n   *\n   * @param {string} note The note's contents\n   * @param {string} id The ID of the note\n   * @param {int} x The x coordinate designating where to show the popup\n   * @param {int} y The y coordinate designating where to show the popup\n   * @param {bool} positionRight Indicates it is best to show the popup to the right of the offset\n   * @param {bool} positionBelow Indicates it is best to show the popup below the offset\n   */\n  onNoteClick(note, id, x, y, positionRight, positionBelow) {\n    this.setState({\n      selectedNote: note,\n      modal: 'note',\n      popupX: x,\n      popupY: y,\n      popupPositionRight: positionRight,\n      popupPositionBelow: positionBelow,\n    });\n  }\n\n  /**\n   * Handle the selection of a work.\n   * @param {string} work the title slug of a work to load\n   */\n  onSelectWork(work) {\n    const { data, divisions } = this.state;\n    let isRelated = false;\n\n    // See if this is a related work\n    if (data && data.related_works) {\n      isRelated = data.related_works.find(\n        (relatedWork) => relatedWork.title_slug === work,\n      );\n    }\n\n    // If this is related work, then use the same divisions\n    if (isRelated) {\n      this.navigateToChapter(work, ...divisions);\n    } else {\n      this.navigateToChapter(work);\n    }\n  }\n\n  /**\n   * Accept the enter key as a jumop to execute the reference jump.\n   * @param {object} event The event from the key press.\n   */\n  onKeyPressed(event) {\n    if (event.key === 'Enter') {\n      this.goToReference();\n    }\n  }\n\n  /**\n   * Get the dialogs that ought to be rendered.\n   */\n  getDialogs() {\n    const {\n      modal, data, loading, loadedWork,\n    } = this.state;\n\n    return (\n      <>\n        {data && !loading && modal === 'aboutWork' && (\n          <AboutWorkDialog\n            work={loadedWork}\n            onClose={() => this.closeModal()}\n          />\n        )}\n        {data && !loading && modal === 'downloadWork' && (\n          <WorkDownloadDialog\n            work={loadedWork}\n            onClose={() => this.closeModal()}\n          />\n        )}\n      </>\n    );\n  }\n\n  /**\n   * Get the popups.\n   */\n  getPopups() {\n    const {\n      modal, data, loading, selectedWord, popupX, popupY, popupPositionRight, popupPositionBelow,\n      selectedNote, loadedWork,\n    } = this.state;\n\n    const { inverted } = this.props;\n\n    return (\n      <>\n        {data && !loading && modal === 'word' && (\n          <WordInformation\n            inverted={inverted}\n            positionBelow={popupPositionBelow}\n            positionRight={popupPositionRight}\n            x={popupX}\n            y={popupY}\n            word={selectedWord}\n            work={loadedWork}\n            onClose={() => this.closeModal()}\n          />\n        )}\n        {data && !loading && modal === 'note' && (\n          <FootnotePopup\n            inverted={inverted}\n            positionBelow={popupPositionBelow}\n            positionRight={popupPositionRight}\n            x={popupX}\n            y={popupY}\n            notes={selectedNote}\n            onClose={() => this.closeModal()}\n          />\n        )}\n      </>\n    );\n  }\n\n  /**\n   * Open or close the book selection dialog.\n   * @param {bool} open Whether the dialog for selecting a book ought to be open.\n   */\n  setBookSelectionOpen(open = true) {\n    this.setState({\n      bookSelectionOpen: open,\n    });\n  }\n\n  /**\n   * Set an error state.\n   *\n   * @param {string} errorTitle The title\n   * @param {string} errorDescription The description\n   * @param {string} errorMessage The detailed error message (like from an AJAX call)\n   */\n  setErrorState(errorTitle, errorDescription = '', errorMessage = null) {\n    this.setState({\n      errorMessage,\n      errorDescription,\n      errorTitle,\n    });\n  }\n\n  /**\n   * Opens or closes the sidebar.\n   * @param {bool} visible Whether the sidebad should be open.\n   */\n  setSidebarVisible(visible = true) {\n    this.setState({\n      sidebarVisible: visible,\n    });\n  }\n\n  /**\n   * Add the href to the list so that we can remember what URL is capable of loading it.\n   * @param {string} href The partial URL of the page (e.g. \"/work/new-testament/John/8/4\")\n   * @param {string} chapter The chapter descriptor (e.g. \"John/9\")\n   */\n  addVerseToHistoryList(href, chapter, verse, referenceValue) {\n    this.verseReferences[href] = {\n      chapter,\n      verse,\n      referenceValue,\n    };\n  }\n\n  /**\n   * Update the history but only if it has changed.\n   *\n   * @param {str} work The title slug of the work\n   * @param  {...any} divisions The list of division indicators\n   */\n  updateHistory(work, ...divisions) {\n    const { history, location } = this.props;\n\n    // Get the URL\n    const workUrl = READ_WORK(work, ...divisions);\n\n    // Determine if the URL is already set\n    // Note that we need to check redirectedFrom because the URL might not match because we were\n    // redirected since a work had been renamed.\n    if (workUrl === location.pathname) {\n      return false;\n    }\n\n    history.push(workUrl);\n    return true;\n  }\n\n  /**\n   * Navigate to chapter.\n   *\n   * @param {string} work The title slug of the work\n   * @param {array} divisions The list of division indicators\n   */\n  navigateToChapter(work, ...divisions) {\n    this.updateHistory(work, ...divisions);\n  }\n\n  /**\n   * Load the given chapter.\n   *\n   * @param {string} work The title slug of the work\n   * @param {array} divisions The list of division indicators\n   */\n  loadChapter(work, ...divisions) {\n    this.setState({\n      loading: true,\n      bookSelectionOpen: false,\n      modal: null,\n      errorTitle: null,\n      errorMessage: null,\n      errorDescription: null,\n      redirectedFrom: null,\n      redirectedTo: null,\n      highlightedVerse: null,\n    });\n\n    fetch(ENDPOINT_READ_WORK(work, ...divisions))\n      .then((res) => (Promise.all([res.status, res.json()])))\n      .then(([status, data]) => {\n        if (status >= 200 && status < 300) {\n          let redirectedFrom = null;\n          let redirectedTo = null;\n\n          // If the work alias didn't match, then update the URL accordingly\n          if (data.work.title_slug !== work) {\n            redirectedFrom = READ_WORK(work, ...divisions);\n            redirectedTo = READ_WORK(data.work.title_slug, ...divisions);\n          }\n\n          this.setState({\n            data,\n            loading: false,\n            loadedWork: data.work.title_slug,\n            divisions,\n            referenceValue: data.reference_descriptor,\n            referenceValid: true,\n            redirectedFrom,\n            redirectedTo,\n            highlightedVerse: data.verse_to_highlight,\n          });\n\n          // Add the verse to the list\n          this.addVerseToHistoryList(\n            READ_WORK(work, ...divisions),\n            data.chapter.full_descriptor,\n            data.verse_to_highlight,\n            data.chapter.description,\n          );\n\n          // Update the URL if we were redirected\n          if (redirectedFrom) {\n            this.updateHistory(data.work.title_slug, ...divisions);\n          }\n\n          // Preload the next chapter so that it is cached\n          this.preloadNextChapter();\n        } else {\n          this.setErrorState(\n            'Work could not be found',\n            'Yikes. The given work is not recognized as a valid work.',\n          );\n        }\n      })\n      .catch((e) => {\n        this.setErrorState(\n          'Unable to load the content',\n          'The given chapter could not be loaded from the server',\n          e.toString(),\n        );\n      });\n  }\n\n  /**\n   * Preload the next chapter.\n   */\n  preloadNextChapter() {\n    const { data, loadedWork } = this.state;\n\n    if (data.next_chapter) {\n      fetch(ENDPOINT_READ_WORK(`${loadedWork}/${data.next_chapter.full_descriptor}`));\n    }\n  }\n\n  /**\n   * Preload the prior chapter.\n   */\n  preloadPriorChapter() {\n    const { data, loadedWork } = this.state;\n\n    if (data.previous_chapter) {\n      fetch(ENDPOINT_READ_WORK(`${loadedWork}/${data.previous_chapter.full_descriptor}`));\n    }\n  }\n\n  /**\n   * Open the about modal.\n   */\n  openAboutModal() {\n    this.setState({ modal: 'about' });\n  }\n\n  /**\n   * Preload the next and prior chapter\n   */\n  preloadChapters() {\n    this.preloadNextChapter();\n    this.preloadPriorChapter();\n  }\n\n  /**\n   * Close any open modal.\n   */\n  closeModal() {\n    this.setState({ modal: null });\n  }\n\n  /**\n   * Open the info modal.\n   */\n  openWorkInfoModal() {\n    this.setState({ modal: 'aboutWork' });\n  }\n\n  /**\n   * Go to the search page.\n   */\n  openSearch() {\n    const { history } = this.props;\n    const { divisions, loadedWork } = this.state;\n\n    const q = `work:${loadedWork}`;\n    history.push(SEARCH(q), {\n      work: loadedWork,\n      divisions,\n    });\n  }\n\n  /**\n   * Open the modal for downloading a work.\n   */\n  openDownloadModal() {\n    this.setState({ modal: 'downloadWork' });\n  }\n\n  /**\n   * Change the work to another related work.\n   *\n   * @param {*} event React's original SyntheticEvent.\n   * @param {*} info All props.\n   */\n  changeWork(work) {\n    const { divisions } = this.state;\n    this.navigateToChapter(work, ...divisions);\n  }\n\n  /**\n   * Handle the selection of the division.\n   *\n   * @param {*} event React's original SyntheticEvent.\n   * @param {*} info All props.\n   */\n  changeChapter(event, info) {\n    const { loadedWork } = this.state;\n    this.navigateToChapter(loadedWork, info.value);\n  }\n\n  /**\n   * Handle a change in the reference input.\n   *\n   * @param {*} event React's original SyntheticEvent.\n   * @param {*} info All props.\n   */\n  changeReference(event, info) {\n    const { loadedWork } = this.state;\n\n    // Stop if we have nothing to lookup\n    if (!loadedWork || !info.value) {\n      return;\n    }\n\n    this.setState({\n      referenceValue: info.value,\n      referenceValid: true,\n    });\n\n    // Store this entry so that we can avoid updating the reference if the user entered another\n    // reference before the server's response came back\n    this.lastSetReference = info.value;\n\n    resolveReferenceDebounced(loadedWork, info.value)\n      .then((res) => (Promise.all([res.status, res.json()])))\n      .then(([status, referenceInfo]) => {\n        // If the user already changed the value again, just ignore it\n        if (this.lastSetReference !== info.value) {\n          return;\n        }\n\n        if (status === 200) {\n          this.setState({\n            divisions: referenceInfo.divisions,\n            referenceValue: info.value,\n            referenceValid: true,\n          });\n        } else {\n          this.setState({\n            referenceValue: info.value,\n            referenceValid: false,\n          });\n        }\n      })\n      .catch((e) => {\n        this.setErrorState(\n          'Unable to load the content',\n          'The given chapter could not be loaded from the server',\n          e.toString(),\n        );\n      });\n  }\n\n  /**\n   * Go to the reference defined in the input box.\n   */\n  goToReference() {\n    const { loadedWork, referenceValue } = this.state;\n\n    // Stop if we have no where to go\n    if (!loadedWork || !referenceValue) {\n      return;\n    }\n\n    // Verify the reference is valid before going to it\n    fetch(ENDPOINT_RESOLVE_REFERENCE(loadedWork, referenceValue))\n      .then((res) => (Promise.all([res.status, res.json()])))\n      .then(([status, referenceInfo]) => {\n        if (status === 200) {\n          this.setState({\n            divisions: referenceInfo.divisions,\n            referenceValue,\n            referenceValid: true,\n          });\n\n          this.navigateToChapter(loadedWork, ...referenceInfo.divisions);\n        } else {\n          this.setState({\n            referenceValue,\n            referenceValid: false,\n          });\n        }\n      })\n      .catch((e) => {\n        this.setErrorState(\n          'Unable to load the content',\n          'The given chapter could not be loaded from the server',\n          e.toString(),\n        );\n      });\n  }\n\n  /**\n   * Go to the next chapter.\n   */\n  goToNextChapter() {\n    const { data, loadedWork } = this.state;\n    if (data.next_chapter) {\n      this.navigateToChapter(loadedWork, data.next_chapter.full_descriptor);\n    }\n  }\n\n  /**\n   * Go to the prior chapter.\n   */\n  goToPriorChapter() {\n    const { data, loadedWork } = this.state;\n    if (data.previous_chapter) {\n      this.navigateToChapter(loadedWork, data.previous_chapter.full_descriptor);\n    }\n  }\n\n  render() {\n    const {\n      modal, data, errorDescription, loading, referenceValid, referenceValue, bookSelectionOpen,\n      errorTitle, errorMessage, redirectedFrom, sidebarVisible, loadedWork, highlightedVerse,\n    } = this.state;\n\n    const { inverted } = this.props;\n\n    const onVerseClick = (verseDescriptor, verse, id, href, x, y) => {\n      this.onVerseClick(verseDescriptor, verse, id, href, x, y);\n    };\n\n    const onWordClick = (word, x, y, positionRight, positionBelow) => {\n      this.onWordClick(word, x, y, positionRight, positionBelow);\n    };\n\n    const onNoteClick = (word, x, y, positionRight, positionBelow) => {\n      this.onNoteClick(word, x, y, positionRight, positionBelow);\n    };\n\n    // Figure out a description for the chapter\n    let description = '';\n    let referenceDescription = referenceValue;\n\n    if (data) {\n      description = data.chapter.description;\n\n      if (referenceValue === '') {\n        referenceDescription = description;\n      }\n    }\n\n    // Create a custom className for signaling the desire to switch to inverted\n    let classNameSuffix = '';\n\n    if (inverted) {\n      classNameSuffix = ' inverted';\n    }\n\n    // Determine what we ought to be rendering\n    let mode = MODE_LOADING;\n\n    if (data && !loading) {\n      mode = MODE_DONE;\n    } else if (errorTitle) {\n      mode = MODE_ERROR;\n    } else if (loading && !errorTitle) {\n      mode = MODE_LOADING;\n    } else {\n      mode = MODE_NOT_READY;\n    }\n\n    // Get the list of related works so that the book selector can put the related ones at the top\n    const relatedWorks = data && data.related_works ? data.related_works : [];\n    const authors = data && data.authors ? data.authors.map((author) => author.name) : null;\n\n    return (\n      <>\n        <Menu inverted={inverted} style={{ zIndex: 103 }} className={`control ${classNameSuffix}`} fixed=\"top\">\n          <Container>\n            <Menu.Item\n              name=\"works\"\n              onClick={() => this.setSidebarVisible(true)}\n            >\n              <Icon name=\"bars\" />\n            </Menu.Item>\n            <Popup\n              content={(\n                <BookSelection\n                  relatedWorks={relatedWorks}\n                  authors={authors}\n                  onSelectWork={(work) => this.onSelectWork(work)}\n                  loadedWork={loadedWork}\n                />\n              )}\n              on=\"click\"\n              position=\"bottom left\"\n              pinned\n              onClose={() => this.setBookSelectionOpen(false)}\n              onOpen={() => this.setBookSelectionOpen(true)}\n              open={bookSelectionOpen}\n              trigger={(\n                <Menu.Item\n                  name=\"Library\"\n                >\n                  <img style={{ width: 16 }} src={LibraryIcon} alt=\"Library\" />\n                </Menu.Item>\n              )}\n            />\n            <Menu.Item>\n              <Input\n                inverted={inverted}\n                className=\"referenceJumpInput\"\n                action={\n                  (\n                    <Button\n                      disabled={!referenceValid}\n                      inverted={inverted}\n                      onClick={() => this.goToReference()}\n                      basic\n                    >\n                      Go\n                    </Button>\n                  )\n                }\n                placeholder=\"Jump to reference...\"\n                value={referenceDescription}\n                error={!referenceValid}\n                onChange={(e, d) => this.changeReference(e, d)}\n                onKeyPress={(e, d) => this.onKeyPressed(e, d)}\n              />\n            </Menu.Item>\n            <div style={{ float: 'right', marginLeft: 'auto', marginTop: 11 }}>\n              <Responsive minWidth={768}>\n                <Dropdown icon=\"ellipsis vertical\" direction=\"left\">\n                  <Dropdown.Menu>\n                    <Dropdown.Item\n                      text=\"About TextCritical.net\"\n                      onClick={() => this.openAboutModal()}\n                    />\n                  </Dropdown.Menu>\n                </Dropdown>\n              </Responsive>\n            </div>\n          </Container>\n          {mode === MODE_DONE && (\n            <>\n              <Button\n                icon\n                inverted={inverted}\n                style={PriorPageStyle}\n                className={`priorPage ${classNameSuffix}`}\n                disabled={data.previous_chapter === null}\n                onClick={() => this.goToPriorChapter()}\n              >\n                <Icon name=\"left chevron\" />\n              </Button>\n              <Button\n                icon\n                inverted={inverted}\n                style={NextPageStyle}\n                className={`nextPage ${classNameSuffix}`}\n                disabled={data.next_chapter === null}\n                onClick={() => this.goToNextChapter()}\n              >\n                <Icon name=\"right chevron\" />\n              </Button>\n            </>\n          )}\n        </Menu>\n        {mode === MODE_DONE && (\n          <>\n            <Sidebar\n              as={Menu}\n              animation=\"overlay\"\n              icon=\"labeled\"\n              style={{ width: 200, paddingTop: 50 }}\n              inverted\n              visible={sidebarVisible}\n              onHide={() => this.setSidebarVisible(false)}\n              vertical\n              width=\"thin\"\n            >\n              <Image src={ENDPOINT_WORK_IMAGE(loadedWork, 400)} />\n              <Menu.Item as=\"a\" onClick={() => this.openWorkInfoModal()}>\n                Information\n              </Menu.Item>\n              <Menu.Item as=\"a\" onClick={() => this.openDownloadModal()}>\n                Download\n              </Menu.Item>\n              <Menu.Item as=\"a\" onClick={() => this.openSearch()}>\n                Search\n              </Menu.Item>\n            </Sidebar>\n            <Sidebar.Pushable as={Segment} basic style={SidebarStyle} className={`${classNameSuffix}`}>\n              <Sidebar.Pusher>\n                <Container className={`underMenu ${classNameSuffix}`}>\n                  {this.getDialogs()}\n                  {this.getPopups()}\n                  <Grid inverted={inverted}>\n                    <Grid.Row>\n                      <Grid.Column width={8}>\n                        <Header inverted={inverted} floated=\"left\" as=\"h3\">\n                          {data.chapter.parent_division && (\n                            <>\n                              <Dropdown\n                                inline\n                                floating\n                                deburr\n                                scrolling\n                                search={Reader.workSearch}\n                                options={Reader.convertDivisionsToOptions(data.divisions)}\n                                value={data.chapter.parent_division.descriptor}\n                                onChange={(event, info) => this.changeChapter(event, info)}\n                              />\n                              <div style={{ display: 'inline-block', paddingLeft: 6 }}>\n                                {data.chapter.type}\n                                {` ${data.chapter.descriptor}`}\n                              </div>\n                            </>\n                          )}\n                        </Header>\n                      </Grid.Column>\n                      <Grid.Column width={8}>\n                        <Container textAlign=\"right\">\n                          <Header inverted={inverted} floated=\"right\" as=\"h3\">{data.work.title}</Header>\n                        </Container>\n                      </Grid.Column>\n                    </Grid.Row>\n                  </Grid>\n                  <div style={{ marginTop: 6 }} />\n                  {data && data.warnings.map((warning) => (\n                    <Message\n                      className={classNameSuffix}\n                      warning\n                      key={warning[0]}\n                      header={warning[0]}\n                      content={warning[1]}\n                    />\n                  ))}\n                  {redirectedFrom && (\n                  <Message info className={classNameSuffix}>\n                    <p>\n                      The URL you were using was old so you were redirected to the new one.\n                      You may want to update your shortcuts.\n                    </p>\n                  </Message>\n                  )}\n                  {data.total_chapters > 1 && data.total_chapters_in_book > 1 && (\n                    <>\n                      <Segment.Group horizontal style={{ border: 0, marginBottom: 4 }} className={`${classNameSuffix}`}>\n                        <Segment basic inverted style={{ padding: 0 }}>\n                          {data.completed_chapters_in_book}\n                          {' '}\n                          of\n                          {' '}\n                          {data.total_chapters_in_book}\n                          {' '}\n                          chapters\n                          {' '}\n                        </Segment>\n                        <Segment basic inverted style={{ textAlign: 'right', padding: 0 }}>\n                          {Math.round(data.progress_in_book)}\n                          % through the book\n                        </Segment>\n                      </Segment.Group>\n                      <Progress className=\"bookProgress\" color=\"blue\" style={{ margin: '0 0 8px 0' }} percent={data.progress_in_book} size=\"tiny\" />\n                    </>\n                  )}\n\n                  <Chapter\n                    chapter={data.chapter}\n                    content={data.content}\n                    work={data.work}\n                    onVerseClick={onVerseClick}\n                    onWordClick={onWordClick}\n                    onNoteClick={onNoteClick}\n                    onClickAway={() => this.closeModal()}\n                    highlightedVerse={highlightedVerse}\n                    inverted={inverted}\n                  />\n                </Container>\n              </Sidebar.Pusher>\n            </Sidebar.Pushable>\n          </>\n        )}\n        {mode === MODE_ERROR && (\n          <Container style={ContainerStyle} className={`${classNameSuffix}`}>\n            <ErrorMessage\n              inverted={inverted}\n              title={errorTitle}\n              description={errorDescription}\n              message={errorMessage}\n            />\n          </Container>\n        )}\n        {mode === MODE_LOADING && (\n          <Container style={ContainerStyle} className={`${classNameSuffix}`}>\n            {Reader.getPlaceholder(inverted)}\n          </Container>\n        )}\n        {mode === MODE_NOT_READY && (\n          <Container style={ContainerStyle} className={`${classNameSuffix}`}>\n            <div style={{ paddingTop: 24 }}>\n              <NoWorkSelected onClick={() => this.setBookSelectionOpen()} inverted={inverted} />\n            </div>\n          </Container>\n        )}\n        {modal === 'about' && (\n          <AboutDialog onClose={() => this.closeModal()} />\n        )}\n      </>\n    );\n  }\n}\n\nReader.propTypes = {\n  inverted: PropTypes.bool,\n  defaultWork: PropTypes.string,\n  division0: PropTypes.string,\n  division1: PropTypes.string,\n  division2: PropTypes.string,\n  division3: PropTypes.string,\n  division4: PropTypes.string,\n  leftovers: PropTypes.string,\n  // eslint-disable-next-line react/forbid-prop-types\n  location: PropTypes.object.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  history: PropTypes.object.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  match: PropTypes.object.isRequired,\n};\n\nReader.defaultProps = {\n  inverted: false,\n  defaultWork: null,\n  division0: null,\n  division1: null,\n  division2: null,\n  division3: null,\n  division4: null,\n  leftovers: null,\n};\n\nexport default withRouter(Reader);\n","// eslint-disable-next-line import/prefer-default-export\nexport function toTitleCase(str) {\n  return str.replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n}\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Menu, Container } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport AboutDialog from './components/AboutDialog/index';\nimport Reader from './components/Reader/index';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { modal: null };\n  }\n\n  closeModal() {\n    this.setState({ modal: null });\n  }\n\n  openAboutModal() {\n    this.setState({ modal: 'about' });\n  }\n\n  render() {\n    const { modal } = this.state;\n    const { inverted, includeMenu, match } = this.props;\n    const {\n      work: defaultWork,\n      division0,\n      division1,\n      division2,\n      division3,\n      division4,\n      leftovers,\n    } = match.params;\n\n    return (\n      <>\n        { includeMenu && (\n          <Menu inverted={!inverted} attached=\"top\">\n            <Container>\n              <Menu.Item style={{ backgroundColor: '#009ec2' }}>\n                <img alt=\"\" style={{ width: 22, height: 22 }} src=\"book.png\" />\n              </Menu.Item>\n              <Menu.Item\n                name=\"about\"\n                active={false}\n                content=\"About\"\n                onClick={() => this.openAboutModal()}\n              />\n\n              <Menu.Menu position=\"right\">\n                <div className=\"ui right aligned category search item\">\n                  <div className=\"ui transparent icon input\">\n                    <input\n                      className=\"prompt\"\n                      type=\"text\"\n                      placeholder=\"Search works...\"\n                    />\n                    <i className=\"search link icon\" />\n                  </div>\n                  <div className=\"results\" />\n                </div>\n              </Menu.Menu>\n            </Container>\n          </Menu>\n        )}\n        {modal === 'about' && (\n          <AboutDialog onClose={() => this.closeModal()} />\n        )}\n        <Reader\n          defaultWork={defaultWork}\n          inverted={inverted}\n          division0={division0}\n          division1={division1}\n          division2={division2}\n          division3={division3}\n          division4={division4}\n          leftovers={leftovers}\n        />\n      </>\n    );\n  }\n}\n\nApp.propTypes = {\n  inverted: PropTypes.bool,\n  includeMenu: PropTypes.bool,\n  match: PropTypes.object,\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nApp.defaultProps = {\n  inverted: false,\n  includeMenu: false,\n  match: null,\n  location: null,\n  history: null,\n};\n\nexport default withRouter(App);\n"],"sourceRoot":""}