{% extends "base_with_nav.html" %}
{% block content %}
{% load string_utils %}

        <ul class="breadcrumb">
            <li><a href="{% url "home" %}">Home</a> <span class="divider">/</span></li>
            <li class="active">Search</li>
		</ul>
		<script src="{{ MEDIA_URL|default:"/media/" }}javascripts/search.tag" type="riot/tag"></script>
		<script src="{{ MEDIA_URL|default:"/media/" }}javascripts/raw.tag" type="riot/tag"></script>
		<!--<script src="{{ MEDIA_URL|default:"/media/" }}javascripts/searchresults.tag" type="riot/tag"></script>-->
		<search updateurl runautomatically></search>
{% endblock %}

{% block javascript %}
<script language="javascript">
	
	require(["jquery", "riot", "store", "app", "underscore", "blockui"], function($, riotjs) {
		
		$(document).ready(function() {
			
			// Execute the search if we already got a search term
			/*
			if ( $("#search-term").val().length > 0 && TextCritical.contains_search_words($("#search-term").val()) ){
				TextCritical.do_search(null, false);
			}
			
			TextCritical.set_caret_at_end( $("#search-term")[0] );
			
			$("#search-button").click( TextCritical.do_fresh_search );
			$("#search-form").submit( TextCritical.do_fresh_search );
			
			$(".next-page-link").click( TextCritical.do_search_next );
			$(".previous-page-link").click( TextCritical.do_search_previous );
			*/
			//window.addEventListener('popstate', TextCritical.search_page_popstate );
			riot = riotjs;
			//riot.route(location.hash);
			riotjs.mount('*');
		});
	
	});
	</script>
{% endblock %}