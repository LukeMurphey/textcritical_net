var TextCritical={};TextCritical.setFormatBreakLine=function(){$(".verse_container").addClass("block");$("#align_break").addClass("active")};TextCritical.unSetFormatBreakLine=function(){$(".verse_container").removeClass("block");$("#align_break").removeClass("active")};TextCritical.toggleTOC=function(){$(".table_of_contents").toggle("fast","swing")};TextCritical.toggleVerseBreak=function(){break_verses=!break_verses;if(break_verses){TextCritical.setFormatBreakLine()}else{TextCritical.unSetFormatBreakLine()}settings.set("break_verses",break_verses)};TextCritical.scrolltoAnchor=function(a){$("html,body").animate({scrollTop:$("#"+a).offset().top},"slow")};TextCritical.scrollToVerse=function(b,a){if(a==null||a==undefined){console.warn("No base chapter URL was provided; will not be able to update the URL for the given verse");return true}var d="verse_"+b;title=document.title;history.pushState({verse:b},title,a+"/"+b);console.info("Updating the URL to point to the selected verse");$(".verse_container").removeClass("highlighted");$(".verse.number").removeClass("label-info");$("#"+d).addClass("highlighted");$("#"+d+" .label").addClass("label-info");TextCritical.scrolltoAnchor(d);return false};TextCritical.loadStoreSettings=function(){var a={break_verses:false};settings=new Store("settings");break_verses=settings.get("break_verses",a);if(break_verses){TextCritical.setFormatBreakLine()}};TextCritical.slugify=function(a){a=a.replace(/[^-a-zA-Z0-9,&\s]+/ig,"");a=a.replace(/-/gi,"_");a=a.replace(/\s/gi,"-");return a};TextCritical.resolve_path=function(b,d){var e=window.location.pathname.split("/");var f=[];for(i=0;i<e.length;i++){if(e[i].length>0){f.push(e[i])}if(f.length>=2){break}}divisions_map={};for(c=0;c<d.length;c++){divisions_map[d[c]]=TextCritical.slugify(d[c]);b=b.replace(d[c],TextCritical.slugify(d[c]))}refs=b.split(/[ :._]+/);for(var a in divisions_map){for(c=0;c<refs.length;c++){refs[c]=refs[c].replace(divisions_map[a],a)}}return"/"+f.concat(refs).join("/")};TextCritical.go_to_chapter=function(a,b){document.location=TextCritical.resolve_path(a,b)};